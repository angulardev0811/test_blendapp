{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useCallback, useState, useEffect, useRef } from \"react\"; // import \"./App.css\"\n\nimport axios from \"axios\";\nimport { Modal, Autocomplete, InlineError, Stack, DropZone, TextField, Layout, Card, TextStyle, ResourceList, Thumbnail, Icon } from \"@shopify/polaris\";\nimport { DeleteMajorMonotone, EditMajorMonotone } from \"@shopify/polaris-icons\";\nexport default function Background() {\n  const {\n    0: flag,\n    1: setFlag\n  } = useState(0);\n  const {\n    0: backgroundData,\n    1: setBackgroundData\n  } = useState([]);\n  const {\n    0: backgroundCategory,\n    1: setBackgroundCategory\n  } = useState([]);\n  const {\n    0: itemCount,\n    1: setItemCount\n  } = useState([]);\n  const {\n    0: imageItems,\n    1: setimageItems\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoding\n  } = useState(false);\n  const {\n    0: activeModal,\n    1: setActiveModal\n  } = useState(false);\n  const {\n    0: openFileDialog,\n    1: setOpenFileDialog\n  } = useState(false);\n  const {\n    0: file,\n    1: setFile\n  } = useState();\n  const {\n    0: imageError,\n    1: setImageError\n  } = useState(\"\");\n  const {\n    0: imageName,\n    1: setimageName\n  } = useState(\"\");\n  const {\n    0: imageNameError,\n    1: setImageNameError\n  } = useState(\"\");\n  const {\n    0: selectedOptions,\n    1: setSelectedOptions\n  } = useState([]);\n  const {\n    0: categoryValue,\n    1: setCategoryValue\n  } = useState(\"\");\n  const {\n    0: options,\n    1: setOptions\n  } = useState(backgroundCategory);\n  const {\n    0: imageCategoryError,\n    1: setCategoryError\n  } = useState(\"\");\n  const {\n    0: selectedItems,\n    1: setSelectedItems\n  } = useState([]);\n  const {\n    0: modalAction,\n    1: setModalAction\n  } = useState({});\n  const {\n    0: fileFlag,\n    1: setFileFlag\n  } = useState(false);\n  const handleChange = useCallback(() => {\n    setModalAction({\n      content: \"Add\",\n      onAction: handleImages\n    });\n    setActiveModal(!activeModal);\n    setFile();\n    setFileURL(\"\");\n    setimageName(\"\");\n    setCategoryValue(\"\");\n    setImageError(\"\");\n    setImageNameError(\"\");\n    setCategoryError(\"\");\n  }, [activeModal]);\n  const toggleOpenFileDialog = useCallback(() => setOpenFileDialog(openFileDialog => !openFileDialog), []);\n  const validImageTypes = [\"image/gif\", \"image/jpeg\", \"image/png\"];\n  const handleDropZoneDrop = useCallback((_dropFiles, acceptedFiles, _rejectedFiles) => {\n    setFile(file => acceptedFiles[0]);\n    setImageError(\"\");\n    setFileURL(\"\");\n  }, []);\n  const {\n    0: fileURL,\n    1: setFileURL\n  } = useState(\"\");\n  const fileUpload = fileURL === \"\" ? !file && __jsx(DropZone.FileUpload, null) : __jsx(Stack, null, __jsx(Thumbnail, {\n    size: \"large\",\n    alt: \"edit\",\n    source: fileURL\n  }));\n\n  const uploadedFile = file && __jsx(Stack, null, __jsx(Thumbnail, {\n    size: \"large\",\n    alt: file.name,\n    source: validImageTypes.indexOf(file.type) > 0 ? window.URL.createObjectURL(file) : \"https://cdn.shopify.com/s/files/1/0757/9955/files/New_Post.png?12678548500147524304\"\n  }));\n\n  const handleImageName = useCallback(newValue => {\n    setimageName(newValue);\n    setImageNameError(\"\");\n  }, []);\n  const updateText = useCallback(value => {\n    setCategoryValue(value);\n\n    if (value === \"\") {\n      setOptions(backgroundCategory);\n      return;\n    }\n\n    try {\n      const filterRegex = new RegExp(value, \"i\");\n      const resultOptions = backgroundCategory.filter(option => option.label.match(filterRegex));\n      setOptions(resultOptions);\n    } catch (err) {\n      console.log(err.message);\n    }\n\n    setCategoryError(\"\");\n  }, [backgroundCategory]);\n  const updateSelection = useCallback(selected => {\n    updateText(selected[0]);\n    setSelectedOptions(selected);\n    setCategoryValue(selected[0]);\n  }, []);\n\n  const textField = __jsx(Autocomplete.TextField, {\n    onChange: updateText,\n    label: \"Image Category\",\n    value: categoryValue,\n    placeholder: \"Enter category\",\n    error: imageCategoryError\n  });\n\n  const handleImagesEdit = () => {\n    console.log(file, imageName, categoryValue);\n\n    if (file === undefined) {\n      setFileFlag(false);\n    } else {\n      setFileFlag(true);\n    }\n\n    if (imageName === \"\" && categoryValue === \"\") {\n      setImageNameError(\"Need Image Name\");\n      setCategoryError(\"Need Category\");\n      return;\n    } else if (imageName === \"\") {\n      setImageNameError(\"Need Image Name\");\n      return;\n    } else if (categoryValue === \"\") {\n      setCategoryError(\"Need Category\");\n      return;\n    }\n\n    for (let i in backgroundData) {\n      let item = backgroundData[i];\n\n      if (item.filename === imageName) {\n        setImageNameError(\"Image Name Exist\");\n        return;\n      }\n    }\n\n    setLoding(true);\n\n    if (fileFlag) {\n      let formdata = new FormData();\n      formdata.append(\"file\", file);\n      formdata.append(\"filename\", imageName);\n      formdata.append(\"category\", categoryValue);\n      axios.post(\"https://fe35119c.ngrok.io/background/editWithFile\", formdata, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(res => {\n        if (res.data === \"success\") {\n          setFlag(0);\n          setActiveModal(false);\n          setFile();\n          setimageName(\"\");\n          setCategoryValue(\"\");\n          setLoding(false);\n          console.log(res.data);\n        } else {\n          console.log(res.data);\n        }\n      });\n    } else {\n      let formdata = {\n        filename: imageName,\n        category: categoryValue\n      };\n      axios.post(\"https://fe35119c.ngrok.io/background/editwithoutFile\", formdata, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(res => {\n        if (res.data === \"success\") {\n          setFlag(0);\n          setActiveModal(false);\n          setFile();\n          setimageName(\"\");\n          setCategoryValue(\"\");\n          setLoding(false);\n          console.log(res.data);\n        } else {\n          console.log(res.data);\n        }\n      });\n    }\n  };\n\n  const editImage = (id, name, media, category) => {\n    console.log(id, name, media.props.source, category);\n    setModalAction({\n      content: \"Save\",\n      onAction: handleImagesEdit\n    });\n    setFileURL(media.props.source);\n    setimageName(name);\n    setCategoryValue(category);\n    setActiveModal(true);\n  };\n\n  const deleteImage = id => {\n    console.log(id);\n  };\n\n  const handleImages = () => {\n    console.log(file, imageName, categoryValue);\n\n    if (file === undefined && imageName === \"\" && categoryValue === \"\") {\n      setImageError(\"Need Image\");\n      setImageNameError(\"Need Image Name\");\n      setCategoryError(\"Need Category\");\n      return;\n    } else if (file === undefined && imageName === \"\") {\n      setImageError(\"Need Image\");\n      setImageNameError(\"Need Image Name\");\n      return;\n    } else if (file === undefined && categoryValue === \"\") {\n      setImageError(\"Need Image\");\n      setCategoryError(\"Need Category\");\n      return;\n    } else if (imageName === \"\" && categoryValue === \"\") {\n      setImageNameError(\"Need Image Name\");\n      setCategoryError(\"Need Category\");\n      return;\n    } else if (file === undefined) {\n      setImageError(\"Need Image\");\n      return;\n    } else if (imageName === \"\") {\n      setImageNameError(\"Need Image Name\");\n      return;\n    } else if (categoryValue === \"\") {\n      setCategoryError(\"Need Category\");\n      return;\n    }\n\n    for (let i in backgroundData) {\n      let item = backgroundData[i];\n\n      if (item.filename === imageName) {\n        setImageNameError(\"Image Name Exist\");\n        return;\n      }\n    }\n\n    setLoding(true);\n    let formdata = new FormData();\n    formdata.append(\"file\", file);\n    formdata.append(\"filename\", imageName);\n    formdata.append(\"category\", categoryValue);\n    axios.post(\"https://fe35119c.ngrok.io/background\", formdata, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    }).then(res => {\n      if (res.data === \"success\") {\n        setFlag(0);\n        setActiveModal(false);\n        setFile();\n        setimageName(\"\");\n        setCategoryValue(\"\");\n        setLoding(false);\n        console.log(res.data);\n      } else {\n        console.log(res.data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        if (!flag) {\n          let response = await axios.get(\"https://fe35119c.ngrok.io/background\");\n          setBackgroundData(response.data);\n          let allCategorys = [];\n\n          for (let i in backgroundData) {\n            allCategorys.push(backgroundData[i].category);\n          }\n\n          let filterCategory = allCategorys.filter(function (elem, index, self) {\n            return index === self.indexOf(elem);\n          });\n          let categoryArr = [];\n\n          for (let i in filterCategory) {\n            let item = filterCategory[i];\n            categoryArr.push({\n              value: item,\n              label: item\n            });\n          }\n\n          setBackgroundCategory(categoryArr);\n          let imageItemsData = [];\n\n          for (let i in backgroundData) {\n            let item = backgroundData[i];\n            imageItemsData.push({\n              id: item._id,\n              name: item.filename,\n              category: item.category,\n              media: __jsx(Thumbnail, {\n                source: item.filepath,\n                alt: item.filename\n              })\n            });\n          }\n\n          setimageItems(imageItemsData);\n          setItemCount(imageItemsData.length);\n          setFlag(1);\n        }\n      } catch (e) {\n        console.log(`Axios request failed: ${e}`);\n      }\n    }\n\n    fetchData();\n  });\n  return __jsx(\"div\", null, __jsx(Layout, null, __jsx(Layout.Section, null, __jsx(Card, {\n    title: \"Background Images\",\n    actions: [{\n      content: \"Add Background Image\",\n      onAction: handleChange\n    }]\n  }, __jsx(Card.Section, null, __jsx(TextStyle, {\n    variation: \"subdued\"\n  }, itemCount, \" Background Images\")), __jsx(Card.Section, null, __jsx(ResourceList, {\n    resourceName: {\n      singular: \"image\",\n      plural: \"images\"\n    },\n    items: imageItems,\n    selectedItems: selectedItems,\n    onSelectionChange: setSelectedItems,\n    renderItem: item => {\n      const {\n        id,\n        name,\n        media,\n        category\n      } = item;\n      const shortcutActions = [{\n        content: __jsx(Icon, {\n          source: EditMajorMonotone,\n          color: \"red\"\n        }),\n        onAction: () => {\n          editImage(id, name, media, category);\n        }\n      }, {\n        content: __jsx(Icon, {\n          source: DeleteMajorMonotone,\n          color: \"red\"\n        }),\n        onAction: () => {\n          deleteImage(id);\n        }\n      }];\n      return __jsx(ResourceList.Item, {\n        id: id,\n        media: media,\n        accessibilityLabel: `View details for ${name}`,\n        shortcutActions: shortcutActions,\n        persistActions: true\n      }, __jsx(\"h3\", null, __jsx(TextStyle, {\n        variation: \"strong\"\n      }, __jsx(\"span\", {\n        style: {\n          fontSize: 12\n        }\n      }, \"Name: \"), name)), __jsx(\"h3\", null, __jsx(TextStyle, {\n        variation: \"strong\"\n      }, __jsx(\"span\", {\n        style: {\n          fontSize: 12\n        }\n      }, \"Category: \"), category)));\n    }\n  }))))), __jsx(Modal, {\n    open: activeModal,\n    onClose: handleChange,\n    title: \"Add Image\",\n    primaryAction: modalAction,\n    style: {\n      padding: \"20px\"\n    },\n    loading: loading\n  }, __jsx(Modal.Section, null, __jsx(Stack, {\n    alignment: \"center\"\n  }, __jsx(Stack.Item, null, __jsx(\"div\", {\n    style: {\n      width: 100,\n      height: 100\n    }\n  }, __jsx(DropZone, {\n    openFileDialog: openFileDialog,\n    onDrop: handleDropZoneDrop,\n    onFileDialogClose: toggleOpenFileDialog\n  }, fileUpload, uploadedFile), __jsx(InlineError, {\n    message: imageError\n  }))), __jsx(Stack.Item, null, __jsx(TextField, {\n    label: \"Image Name\",\n    value: imageName,\n    onChange: handleImageName,\n    placeholder: \"Enter image name\",\n    error: imageNameError\n  })), __jsx(Stack.Item, null, __jsx(Autocomplete, {\n    options: options,\n    selected: selectedOptions,\n    onSelect: updateSelection,\n    textField: textField\n  }))))));\n}","map":{"version":3,"sources":["E:/Lenny/blendapp/pages/Background.js"],"names":["React","useCallback","useState","useEffect","useRef","axios","Modal","Autocomplete","InlineError","Stack","DropZone","TextField","Layout","Card","TextStyle","ResourceList","Thumbnail","Icon","DeleteMajorMonotone","EditMajorMonotone","Background","flag","setFlag","backgroundData","setBackgroundData","backgroundCategory","setBackgroundCategory","itemCount","setItemCount","imageItems","setimageItems","loading","setLoding","activeModal","setActiveModal","openFileDialog","setOpenFileDialog","file","setFile","imageError","setImageError","imageName","setimageName","imageNameError","setImageNameError","selectedOptions","setSelectedOptions","categoryValue","setCategoryValue","options","setOptions","imageCategoryError","setCategoryError","selectedItems","setSelectedItems","modalAction","setModalAction","fileFlag","setFileFlag","handleChange","content","onAction","handleImages","setFileURL","toggleOpenFileDialog","validImageTypes","handleDropZoneDrop","_dropFiles","acceptedFiles","_rejectedFiles","fileURL","fileUpload","uploadedFile","name","indexOf","type","window","URL","createObjectURL","handleImageName","newValue","updateText","value","filterRegex","RegExp","resultOptions","filter","option","label","match","err","console","log","message","updateSelection","selected","textField","handleImagesEdit","undefined","i","item","filename","formdata","FormData","append","post","headers","then","res","data","category","editImage","id","media","props","source","deleteImage","fetchData","response","get","allCategorys","push","filterCategory","elem","index","self","categoryArr","imageItemsData","_id","filepath","length","e","singular","plural","shortcutActions","fontSize","padding","width","height"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect, useRef } from \"react\";\r\n// import \"./App.css\"\r\nimport axios from \"axios\";\r\nimport {\r\n  Modal,\r\n  Autocomplete,\r\n  InlineError,\r\n  Stack,\r\n  DropZone,\r\n  TextField,\r\n  Layout,\r\n  Card,\r\n  TextStyle,\r\n  ResourceList,\r\n  Thumbnail,\r\n  Icon\r\n} from \"@shopify/polaris\";\r\nimport { DeleteMajorMonotone, EditMajorMonotone } from \"@shopify/polaris-icons\";\r\n\r\nexport default function Background() {\r\n  const [flag, setFlag] = useState(0);\r\n  const [backgroundData, setBackgroundData] = useState([]);\r\n  const [backgroundCategory, setBackgroundCategory] = useState([]);\r\n  const [itemCount, setItemCount] = useState([]);\r\n  const [imageItems, setimageItems] = useState([]);\r\n  const [loading, setLoding] = useState(false);\r\n  const [activeModal, setActiveModal] = useState(false);\r\n  const [openFileDialog, setOpenFileDialog] = useState(false);\r\n  const [file, setFile] = useState();\r\n  const [imageError, setImageError] = useState(\"\");\r\n  const [imageName, setimageName] = useState(\"\");\r\n  const [imageNameError, setImageNameError] = useState(\"\");\r\n  const [selectedOptions, setSelectedOptions] = useState([]);\r\n  const [categoryValue, setCategoryValue] = useState(\"\");\r\n  const [options, setOptions] = useState(backgroundCategory);\r\n  const [imageCategoryError, setCategoryError] = useState(\"\");\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [modalAction, setModalAction] = useState({});\r\n  const [fileFlag, setFileFlag] = useState(false);\r\n\r\n  const handleChange = useCallback(() => {\r\n    setModalAction({\r\n      content: \"Add\",\r\n      onAction: handleImages\r\n    });\r\n    setActiveModal(!activeModal);\r\n    setFile();\r\n    setFileURL(\"\");\r\n    setimageName(\"\");\r\n    setCategoryValue(\"\");\r\n    setImageError(\"\");\r\n    setImageNameError(\"\");\r\n    setCategoryError(\"\");\r\n  }, [activeModal]);\r\n  const toggleOpenFileDialog = useCallback(\r\n    () => setOpenFileDialog(openFileDialog => !openFileDialog),\r\n    []\r\n  );\r\n  const validImageTypes = [\"image/gif\", \"image/jpeg\", \"image/png\"];\r\n  const handleDropZoneDrop = useCallback(\r\n    (_dropFiles, acceptedFiles, _rejectedFiles) => {\r\n      setFile(file => acceptedFiles[0]);\r\n      setImageError(\"\");\r\n      setFileURL(\"\");\r\n    },\r\n    []\r\n  );\r\n  const [fileURL, setFileURL] = useState(\"\");\r\n\r\n  const fileUpload =\r\n    fileURL === \"\" ? (\r\n      !file && <DropZone.FileUpload />\r\n    ) : (\r\n      <Stack>\r\n        <Thumbnail size=\"large\" alt=\"edit\" source={fileURL} />\r\n      </Stack>\r\n    );\r\n  const uploadedFile = file && (\r\n    <Stack>\r\n      <Thumbnail\r\n        size=\"large\"\r\n        alt={file.name}\r\n        source={\r\n          validImageTypes.indexOf(file.type) > 0\r\n            ? window.URL.createObjectURL(file)\r\n            : \"https://cdn.shopify.com/s/files/1/0757/9955/files/New_Post.png?12678548500147524304\"\r\n        }\r\n      />\r\n    </Stack>\r\n  );\r\n  const handleImageName = useCallback(newValue => {\r\n    setimageName(newValue);\r\n    setImageNameError(\"\");\r\n  }, []);\r\n\r\n  const updateText = useCallback(\r\n    value => {\r\n      setCategoryValue(value);\r\n      if (value === \"\") {\r\n        setOptions(backgroundCategory);\r\n        return;\r\n      }\r\n      try {\r\n        const filterRegex = new RegExp(value, \"i\");\r\n        const resultOptions = backgroundCategory.filter(option =>\r\n          option.label.match(filterRegex)\r\n        );\r\n        setOptions(resultOptions);\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n      setCategoryError(\"\");\r\n    },\r\n    [backgroundCategory]\r\n  );\r\n\r\n  const updateSelection = useCallback(selected => {\r\n    updateText(selected[0]);\r\n    setSelectedOptions(selected);\r\n    setCategoryValue(selected[0]);\r\n  }, []);\r\n\r\n  const textField = (\r\n    <Autocomplete.TextField\r\n      onChange={updateText}\r\n      label=\"Image Category\"\r\n      value={categoryValue}\r\n      placeholder=\"Enter category\"\r\n      error={imageCategoryError}\r\n    />\r\n  );\r\n\r\n  const handleImagesEdit = () => {\r\n    console.log(file, imageName, categoryValue);\r\n    if (file === undefined) {\r\n      setFileFlag(false);\r\n    } else {\r\n      setFileFlag(true);\r\n    }\r\n    if (imageName === \"\" && categoryValue === \"\") {\r\n      setImageNameError(\"Need Image Name\");\r\n      setCategoryError(\"Need Category\");\r\n      return;\r\n    } else if (imageName === \"\") {\r\n      setImageNameError(\"Need Image Name\");\r\n      return;\r\n    } else if (categoryValue === \"\") {\r\n      setCategoryError(\"Need Category\");\r\n      return;\r\n    }\r\n    for (let i in backgroundData) {\r\n      let item = backgroundData[i];\r\n      if (item.filename === imageName) {\r\n        setImageNameError(\"Image Name Exist\");\r\n        return;\r\n      }\r\n    }\r\n    setLoding(true);\r\n    if (fileFlag) {\r\n      let formdata = new FormData();\r\n      formdata.append(\"file\", file);\r\n      formdata.append(\"filename\", imageName);\r\n      formdata.append(\"category\", categoryValue);\r\n      axios\r\n        .post(\"https://fe35119c.ngrok.io/background/editWithFile\", formdata, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\"\r\n          }\r\n        })\r\n        .then(res => {\r\n          if (res.data === \"success\") {\r\n            setFlag(0);\r\n            setActiveModal(false);\r\n            setFile();\r\n            setimageName(\"\");\r\n            setCategoryValue(\"\");\r\n            setLoding(false);\r\n            console.log(res.data);\r\n          } else {\r\n            console.log(res.data);\r\n          }\r\n        });\r\n    } else {\r\n      let formdata = {\r\n        filename: imageName,\r\n        category: categoryValue\r\n      };\r\n      axios\r\n        .post(\r\n          \"https://fe35119c.ngrok.io/background/editwithoutFile\",\r\n          formdata,\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"multipart/form-data\"\r\n            }\r\n          }\r\n        )\r\n        .then(res => {\r\n          if (res.data === \"success\") {\r\n            setFlag(0);\r\n            setActiveModal(false);\r\n            setFile();\r\n            setimageName(\"\");\r\n            setCategoryValue(\"\");\r\n            setLoding(false);\r\n            console.log(res.data);\r\n          } else {\r\n            console.log(res.data);\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  const editImage = (id, name, media, category) => {\r\n    console.log(id, name, media.props.source, category);\r\n    setModalAction({\r\n      content: \"Save\",\r\n      onAction: handleImagesEdit\r\n    });\r\n    setFileURL(media.props.source);\r\n    setimageName(name);\r\n    setCategoryValue(category);\r\n    setActiveModal(true);\r\n  };\r\n\r\n  const deleteImage = id => {\r\n    console.log(id);\r\n  };\r\n\r\n  const handleImages = () => {\r\n    console.log(file, imageName, categoryValue);\r\n    if (file === undefined && imageName === \"\" && categoryValue === \"\") {\r\n      setImageError(\"Need Image\");\r\n      setImageNameError(\"Need Image Name\");\r\n      setCategoryError(\"Need Category\");\r\n      return;\r\n    } else if (file === undefined && imageName === \"\") {\r\n      setImageError(\"Need Image\");\r\n      setImageNameError(\"Need Image Name\");\r\n      return;\r\n    } else if (file === undefined && categoryValue === \"\") {\r\n      setImageError(\"Need Image\");\r\n      setCategoryError(\"Need Category\");\r\n      return;\r\n    } else if (imageName === \"\" && categoryValue === \"\") {\r\n      setImageNameError(\"Need Image Name\");\r\n      setCategoryError(\"Need Category\");\r\n      return;\r\n    } else if (file === undefined) {\r\n      setImageError(\"Need Image\");\r\n      return;\r\n    } else if (imageName === \"\") {\r\n      setImageNameError(\"Need Image Name\");\r\n      return;\r\n    } else if (categoryValue === \"\") {\r\n      setCategoryError(\"Need Category\");\r\n      return;\r\n    }\r\n    for (let i in backgroundData) {\r\n      let item = backgroundData[i];\r\n      if (item.filename === imageName) {\r\n        setImageNameError(\"Image Name Exist\");\r\n        return;\r\n      }\r\n    }\r\n    setLoding(true);\r\n    let formdata = new FormData();\r\n    formdata.append(\"file\", file);\r\n    formdata.append(\"filename\", imageName);\r\n    formdata.append(\"category\", categoryValue);\r\n    axios\r\n      .post(\"https://fe35119c.ngrok.io/background\", formdata, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\"\r\n        }\r\n      })\r\n      .then(res => {\r\n        if (res.data === \"success\") {\r\n          setFlag(0);\r\n          setActiveModal(false);\r\n          setFile();\r\n          setimageName(\"\");\r\n          setCategoryValue(\"\");\r\n          setLoding(false);\r\n          console.log(res.data);\r\n        } else {\r\n          console.log(res.data);\r\n        }\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        if (!flag) {\r\n          let response = await axios.get(\r\n            \"https://fe35119c.ngrok.io/background\"\r\n          );\r\n          setBackgroundData(response.data);\r\n          let allCategorys = [];\r\n          for (let i in backgroundData) {\r\n            allCategorys.push(backgroundData[i].category);\r\n          }\r\n          let filterCategory = allCategorys.filter(function(elem, index, self) {\r\n            return index === self.indexOf(elem);\r\n          });\r\n          let categoryArr = [];\r\n          for (let i in filterCategory) {\r\n            let item = filterCategory[i];\r\n            categoryArr.push({\r\n              value: item,\r\n              label: item\r\n            });\r\n          }\r\n          setBackgroundCategory(categoryArr);\r\n          let imageItemsData = [];\r\n          for (let i in backgroundData) {\r\n            let item = backgroundData[i];\r\n            imageItemsData.push({\r\n              id: item._id,\r\n              name: item.filename,\r\n              category: item.category,\r\n              media: <Thumbnail source={item.filepath} alt={item.filename} />\r\n            });\r\n          }\r\n          setimageItems(imageItemsData);\r\n          setItemCount(imageItemsData.length);\r\n          setFlag(1);\r\n        }\r\n      } catch (e) {\r\n        console.log(`Axios request failed: ${e}`);\r\n      }\r\n    }\r\n    fetchData();\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <Layout>\r\n        <Layout.Section>\r\n          <Card\r\n            title=\"Background Images\"\r\n            actions={[\r\n              {\r\n                content: \"Add Background Image\",\r\n                onAction: handleChange\r\n              }\r\n            ]}\r\n          >\r\n            <Card.Section>\r\n              <TextStyle variation=\"subdued\">\r\n                {itemCount} Background Images\r\n              </TextStyle>\r\n            </Card.Section>\r\n            <Card.Section>\r\n              <ResourceList\r\n                resourceName={{ singular: \"image\", plural: \"images\" }}\r\n                items={imageItems}\r\n                selectedItems={selectedItems}\r\n                onSelectionChange={setSelectedItems}\r\n                renderItem={item => {\r\n                  const { id, name, media, category } = item;\r\n                  const shortcutActions = [\r\n                    {\r\n                      content: <Icon source={EditMajorMonotone} color=\"red\" />,\r\n                      onAction: () => {\r\n                        editImage(id, name, media, category);\r\n                      }\r\n                    },\r\n                    {\r\n                      content: (\r\n                        <Icon source={DeleteMajorMonotone} color=\"red\" />\r\n                      ),\r\n                      onAction: () => {\r\n                        deleteImage(id);\r\n                      }\r\n                    }\r\n                  ];\r\n\r\n                  return (\r\n                    <ResourceList.Item\r\n                      id={id}\r\n                      media={media}\r\n                      accessibilityLabel={`View details for ${name}`}\r\n                      shortcutActions={shortcutActions}\r\n                      persistActions\r\n                    >\r\n                      <h3>\r\n                        <TextStyle variation=\"strong\">\r\n                          <span style={{ fontSize: 12 }}>Name: </span>\r\n                          {name}\r\n                        </TextStyle>\r\n                      </h3>\r\n                      <h3>\r\n                        <TextStyle variation=\"strong\">\r\n                          <span style={{ fontSize: 12 }}>Category: </span>\r\n                          {category}\r\n                        </TextStyle>\r\n                      </h3>\r\n                    </ResourceList.Item>\r\n                  );\r\n                }}\r\n              />\r\n            </Card.Section>\r\n          </Card>\r\n        </Layout.Section>\r\n      </Layout>\r\n      <Modal\r\n        open={activeModal}\r\n        onClose={handleChange}\r\n        title=\"Add Image\"\r\n        primaryAction={modalAction}\r\n        style={{ padding: \"20px\" }}\r\n        loading={loading}\r\n      >\r\n        <Modal.Section>\r\n          <Stack alignment=\"center\">\r\n            <Stack.Item>\r\n              <div style={{ width: 100, height: 100 }}>\r\n                <DropZone\r\n                  openFileDialog={openFileDialog}\r\n                  onDrop={handleDropZoneDrop}\r\n                  onFileDialogClose={toggleOpenFileDialog}\r\n                >\r\n                  {fileUpload}\r\n                  {uploadedFile}\r\n                </DropZone>\r\n                <InlineError message={imageError} />\r\n              </div>\r\n            </Stack.Item>\r\n            <Stack.Item>\r\n              <TextField\r\n                label=\"Image Name\"\r\n                value={imageName}\r\n                onChange={handleImageName}\r\n                placeholder=\"Enter image name\"\r\n                error={imageNameError}\r\n              />\r\n            </Stack.Item>\r\n            <Stack.Item>\r\n              <Autocomplete\r\n                options={options}\r\n                selected={selectedOptions}\r\n                onSelect={updateSelection}\r\n                textField={textField}\r\n              />\r\n            </Stack.Item>\r\n          </Stack>\r\n        </Modal.Section>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}