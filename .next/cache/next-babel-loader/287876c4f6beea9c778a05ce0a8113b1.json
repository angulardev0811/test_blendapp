{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport axios from \"axios\";\nimport { Layout, Card, ResourceList, TextStyle, Icon, Thumbnail, Modal, Stack, DropZone, InlineError, TextField, Autocomplete } from \"@shopify/polaris\";\nimport { DeleteMajorMonotone, EditMajorMonotone } from \"@shopify/polaris-icons\";\n\nvar App = /*#__PURE__*/function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  var _super = _createSuper(App);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"getList\", function _callee() {\n      var response, allImageData, allCategorys, i, filterCategory, categoryArray, _i, item, imageListItemsData, _i2, _item;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(axios.get(\"https://54a1da76.ngrok.io/drop\"));\n\n            case 3:\n              response = _context.sent;\n\n              _this.setState({\n                allImageData: response.data\n              });\n\n              allImageData = response.data;\n              allCategorys = [];\n\n              for (i in allImageData) {\n                allCategorys.push(allImageData[i].category);\n              }\n\n              filterCategory = allCategorys.filter(function (elem, index, self) {\n                return index === self.indexOf(elem);\n              });\n              categoryArray = [];\n\n              for (_i in filterCategory) {\n                item = filterCategory[_i];\n                categoryArray.push({\n                  value: item,\n                  label: item\n                });\n              }\n\n              _this.setState({\n                categoryInitOptions: categoryArray,\n                categoryOptions: categoryArray\n              });\n\n              imageListItemsData = [];\n\n              for (_i2 in allImageData) {\n                _item = allImageData[_i2];\n                imageListItemsData.push({\n                  id: _item._id,\n                  name: _item.filename,\n                  category: _item.category,\n                  media: __jsx(Thumbnail, {\n                    source: _item.filepath,\n                    alt: _item.filename\n                  })\n                });\n              }\n\n              _this.setState({\n                imageListItems: imageListItemsData\n              });\n\n              _this.setState({\n                listItemCount: imageListItemsData.length\n              });\n\n              _context.next = 21;\n              break;\n\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 18]], Promise);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"confirmDelete\", function _callee2() {\n      var response;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.setState({\n                loading: true\n              });\n\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(axios.get(\"https://54a1da76.ngrok.io/drop/deleteImage?id=\".concat(_this.state.id)));\n\n            case 3:\n              response = _context2.sent;\n              console.log(response.data);\n\n              if (response.data === \"success\") {\n                _this.getList();\n\n                _this.setState({\n                  loading: false\n                });\n\n                _this.setState({\n                  activeDeleteModal: false\n                });\n              } else {\n                console.log(response.data);\n              }\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    });\n\n    _this.addNewImage = _this.addNewImage.bind(_assertThisInitialized(_this));\n    _this.setSelectedListItems = _this.setSelectedListItems.bind(_assertThisInitialized(_this));\n    _this.editImage = _this.editImage.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n    _this.deleteImage = _this.deleteImage.bind(_assertThisInitialized(_this));\n    _this.handleDropZoneDrop = _this.handleDropZoneDrop.bind(_assertThisInitialized(_this));\n    _this.toggleOpenFileDialog = _this.toggleOpenFileDialog.bind(_assertThisInitialized(_this));\n    _this.updateImageName = _this.updateImageName.bind(_assertThisInitialized(_this));\n    _this.updateCategoryOptions = _this.updateCategoryOptions.bind(_assertThisInitialized(_this));\n    _this.updateCategoryName = _this.updateCategoryName.bind(_assertThisInitialized(_this));\n    _this.handleAddImages = _this.handleAddImages.bind(_assertThisInitialized(_this));\n    _this.handleEditImages = _this.handleEditImages.bind(_assertThisInitialized(_this));\n    _this.state = {\n      allImageData: [],\n      listItemCount: 0,\n      imageListItems: [],\n      selectedListItems: [],\n      activeModal: false,\n      modalAction: {},\n      loading: false,\n      file: null,\n      validImageTypes: [\"image/gif\", \"image/jpeg\", \"image/png\"],\n      openFileDialog: false,\n      fileUpload: \"\",\n      uploadedFile: \"\",\n      fileError: \"\",\n      imageNameError: \"\",\n      imageCategoryError: \"\",\n      imageName: \"\",\n      categoryInitOptions: [],\n      categoryOptions: [],\n      categorySelectedOptions: [],\n      categoryTextField: \"\",\n      categoryValue: \"\",\n      id: \"\",\n      fileURL: \"\",\n      fileFlag: false,\n      nameFlag: false,\n      categoryFlag: false,\n      activeDeleteModal: false\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      return _regeneratorRuntime.async(function componentDidMount$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              this.getList();\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"addNewImage\",\n    value: function addNewImage() {\n      this.setState({\n        activeModal: true,\n        file: null,\n        fileURL: \"\",\n        imageName: \"\",\n        categoryValue: \"\",\n        fileError: \"\",\n        imageNameError: \"\",\n        imageCategoryError: \"\",\n        modalAction: {\n          content: \"Add\",\n          onAction: this.handleAddImages\n        }\n      });\n    }\n  }, {\n    key: \"setSelectedListItems\",\n    value: function setSelectedListItems(items) {\n      console.log(items);\n    }\n  }, {\n    key: \"editImage\",\n    value: function editImage(id, name, media, category) {\n      console.log(id, name, media, category);\n      this.setState({\n        modalAction: {\n          content: \"Save\",\n          onAction: this.handleEditImages\n        },\n        fileError: \"\",\n        imageNameError: \"\",\n        imageCategoryError: \"\",\n        id: id,\n        imageName: name,\n        file: null,\n        fileURL: media.props.source,\n        categoryValue: category,\n        activeModal: true,\n        fileFlag: false,\n        nameFlag: false,\n        categoryFlag: false\n      });\n    }\n  }, {\n    key: \"deleteImage\",\n    value: function deleteImage(id) {\n      this.setState({\n        id: id,\n        activeDeleteModal: true\n      });\n      console.log(id);\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        activeModal: false\n      });\n    }\n  }, {\n    key: \"handleDropZoneDrop\",\n    value: function handleDropZoneDrop(_dropFiles, acceptedFiles, _rejectedFiles) {\n      this.setState({\n        file: acceptedFiles[0],\n        fileError: \"\",\n        fileFlag: true,\n        fileURL: \"\"\n      });\n    }\n  }, {\n    key: \"toggleOpenFileDialog\",\n    value: function toggleOpenFileDialog() {\n      this.setState({\n        openFileDialog: !this.state.openFileDialog\n      });\n      console.log(\"toggle\");\n    }\n  }, {\n    key: \"updateImageName\",\n    value: function updateImageName(value) {\n      this.setState({\n        imageName: value,\n        imageNameError: \"\",\n        nameFlag: true\n      });\n    }\n  }, {\n    key: \"updateCategoryOptions\",\n    value: function updateCategoryOptions(selected) {\n      var _this2 = this;\n\n      var selectedValue = selected.map(function (selectedItem) {\n        var matchedOption = _this2.state.categoryOptions.find(function (option) {\n          return option.value.match(selectedItem);\n        });\n\n        return matchedOption && matchedOption.label;\n      });\n      this.setState({\n        categorySelectedOptions: []\n      });\n      this.updateCategoryName(selectedValue[0]);\n    }\n  }, {\n    key: \"updateCategoryName\",\n    value: function updateCategoryName(value) {\n      this.setState({\n        categoryValue: value,\n        imageCategoryError: \"\",\n        categoryFlag: true\n      });\n\n      if (this.state.categoryValue === \"\") {\n        this.setState({\n          categorySelectedOptions: this.state.categoryOptions\n        });\n      }\n\n      var filterRegex = new RegExp(value, \"i\");\n      var resultOptions = this.state.categoryInitOptions.filter(function (option) {\n        return option.label.match(filterRegex);\n      });\n      this.setState({\n        categoryOptions: resultOptions\n      });\n    }\n  }, {\n    key: \"handleAddImages\",\n    value: function handleAddImages() {\n      var _this3 = this;\n\n      console.log(this.state.file, this.state.imageName, this.state.categoryValue);\n\n      if (this.state.file === null && this.state.imageName === \"\" && this.state.categoryValue === \"\") {\n        this.setState({\n          fileError: \"Need Image\",\n          imageNameError: \"Need Image Name\",\n          imageCategoryError: \"Need Category\"\n        });\n        return;\n      } else if (this.state.file === null && this.state.imageName === \"\") {\n        this.setState({\n          fileError: \"Need Image\",\n          imageNameError: \"Need Image Name\"\n        });\n        return;\n      } else if (this.state.file === null && this.state.categoryValue === \"\") {\n        this.setState({\n          fileError: \"Need Image\",\n          imageCategoryError: \"Need Category\"\n        });\n        return;\n      } else if (this.state.imageName === \"\" && this.state.categoryValue === \"\") {\n        this.setState({\n          imageNameError: \"Need Image Name\",\n          imageCategoryError: \"Need Category\"\n        });\n        return;\n      } else if (this.state.file === null) {\n        this.setState({\n          fileError: \"Need Image\"\n        });\n        return;\n      } else if (this.state.imageName === \"\") {\n        this.setState({\n          imageNameError: \"Need Image Name\"\n        });\n        return;\n      } else if (this.state.categoryValue === \"\") {\n        this.setState({\n          imageCategoryError: \"Need Category\"\n        });\n        return;\n      }\n\n      for (var i in this.state.allImageData) {\n        var item = this.state.allImageData[i];\n\n        if (item.filename === this.state.imageName) {\n          this.setState({\n            imageNameError: \"Image Name Exist\"\n          });\n          return;\n        }\n      }\n\n      this.setState({\n        loading: true\n      });\n      var formdata = new FormData();\n      formdata.append(\"file\", this.state.file);\n      formdata.append(\"filename\", this.state.imageName);\n      formdata.append(\"category\", this.state.categoryValue);\n      axios.post(\"https://54a1da76.ngrok.io/drop\", formdata, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(function (res) {\n        if (res.data === \"success\") {\n          _this3.setState({\n            activeModal: false\n          });\n\n          _this3.getList();\n\n          _this3.setState({\n            loading: false\n          });\n\n          console.log(res.data);\n        } else {\n          console.log(res.data);\n        }\n      });\n    }\n  }, {\n    key: \"handleEditImages\",\n    value: function handleEditImages() {\n      var _this4 = this;\n\n      if (this.state.imageName === \"\" && this.state.categoryValue === \"\") {\n        this.setState({\n          imageNameError: \"Need Image Name\",\n          imageCategoryError: \"Need Category\"\n        });\n        return;\n      } else if (this.state.imageName === \"\") {\n        this.setState({\n          imageNameError: \"Need Image Name\"\n        });\n        return;\n      } else if (this.state.categoryValue === \"\") {\n        this.setState({\n          imageCategoryError: \"Need Category\"\n        });\n        return;\n      }\n\n      for (var i in this.state.allImageData) {\n        var item = this.state.allImageData[i];\n\n        if (item.filename === this.state.imageName) {\n          if (this.state.nameFlag) {\n            this.setState({\n              imageNameError: \"Image Name Exist\"\n            });\n            return;\n          }\n        }\n      }\n\n      if (!this.state.fileFlag && !this.state.nameFlag && !this.state.categoryFlag) {\n        this.setState({\n          activeModal: false\n        });\n        return;\n      }\n\n      if (this.state.fileFlag) {\n        this.setState({\n          loading: true\n        });\n        var formdata = new FormData();\n        formdata.append(\"file\", this.state.file);\n        formdata.append(\"filename\", this.state.imageName);\n        formdata.append(\"category\", this.state.categoryValue);\n        formdata.append(\"id\", this.state.id);\n        axios.post(\"https://54a1da76.ngrok.io/drop/editWithFile\", formdata, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        }).then(function (res) {\n          if (res.data === \"success\") {\n            _this4.getList();\n\n            _this4.setState({\n              activeModal: false,\n              loading: false\n            });\n\n            console.log(res.data);\n          } else {\n            console.log(res.data);\n          }\n        });\n      } else {\n        if (this.state.nameFlag) {\n          console.log(\"edit both\");\n          this.setState({\n            loading: true\n          });\n          var _formdata = {\n            id: this.state.id,\n            filename: this.state.imageName,\n            category: this.state.categoryValue\n          };\n          axios.post(\"https://54a1da76.ngrok.io/drop/editWithoutFile\", {\n            data: _formdata\n          }).then(function (res) {\n            if (res.data === \"success\") {\n              _this4.getList();\n\n              _this4.setState({\n                activeModal: false,\n                loading: false\n              });\n\n              console.log(res.data);\n            } else {\n              console.log(res.data);\n            }\n          });\n        } else if (this.state.categoryFlag) {\n          console.log(\"edit Category\");\n          this.setState({\n            loading: true\n          });\n          var _formdata2 = {\n            id: this.state.id,\n            category: this.state.categoryValue\n          };\n          axios.post(\"https://54a1da76.ngrok.io/drop/editWithoutFile\", {\n            data: _formdata2\n          }).then(function (res) {\n            if (res.data === \"success\") {\n              _this4.getList();\n\n              _this4.setState({\n                activeModal: false,\n                loading: false\n              });\n\n              console.log(res.data);\n            } else {\n              console.log(res.data);\n            }\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var categoryTextField = __jsx(Autocomplete.TextField, {\n        onChange: this.updateCategoryName,\n        label: \"Image Category\",\n        value: this.state.categoryValue,\n        placeholder: \"Enter category\",\n        error: this.state.imageCategoryError\n      });\n\n      var fileUpload = this.state.fileURL === \"\" ? !this.state.file && __jsx(DropZone.FileUpload, null) : __jsx(Stack, null, __jsx(Thumbnail, {\n        size: \"large\",\n        alt: \"edit\",\n        source: this.state.fileURL\n      }));\n\n      var uploadedFile = this.state.file && __jsx(Stack, null, __jsx(Thumbnail, {\n        size: \"large\",\n        alt: this.state.file.name,\n        source: this.state.validImageTypes.indexOf(this.state.file.type) > 0 ? window.URL.createObjectURL(this.state.file) : \"https://cdn.shopify.com/s/files/1/0757/9955/files/New_Post.png?12678548500147524304\"\n      }));\n\n      return __jsx(\"div\", null, __jsx(Layout, null, __jsx(Layout.Section, null, __jsx(Card, {\n        title: \"Drop Images\",\n        actions: [{\n          content: \"Add Drop Image\",\n          onAction: this.addNewImage\n        }]\n      }, __jsx(Card.Section, null, __jsx(TextStyle, {\n        variation: \"subdued\"\n      }, this.state.listItemCount, \" Drop Images\")), __jsx(Card.Section, null, __jsx(ResourceList, {\n        resourceName: {\n          singular: \"image\",\n          plural: \"images\"\n        },\n        items: this.state.imageListItems,\n        selectedItems: this.state.selectedListItems,\n        onSelectionChange: this.setSelectedListItems,\n        renderItem: function renderItem(item) {\n          var id = item.id,\n              name = item.name,\n              media = item.media,\n              category = item.category;\n          var shortcutActions = [{\n            content: __jsx(Icon, {\n              source: EditMajorMonotone,\n              color: \"red\"\n            }),\n            onAction: function onAction() {\n              return _this5.editImage(id, name, media, category);\n            }\n          }, {\n            content: __jsx(Icon, {\n              source: DeleteMajorMonotone,\n              color: \"red\"\n            }),\n            onAction: function onAction() {\n              return _this5.deleteImage(id);\n            }\n          }];\n          return __jsx(ResourceList.Item, {\n            id: id,\n            media: media,\n            accessibilityLabel: \"View details for \".concat(name),\n            shortcutActions: shortcutActions,\n            persistActions: true\n          }, __jsx(\"h3\", null, __jsx(TextStyle, {\n            variation: \"strong\"\n          }, __jsx(\"span\", {\n            style: {\n              fontSize: 12\n            }\n          }, \"Name: \"), name)), __jsx(\"h3\", null, __jsx(TextStyle, {\n            variation: \"strong\"\n          }, __jsx(\"span\", {\n            style: {\n              fontSize: 12\n            }\n          }, \"Category: \"), category)));\n        }\n      }))))), __jsx(Modal, {\n        open: this.state.activeModal,\n        onClose: this.closeModal,\n        title: \"Add Image\",\n        primaryAction: this.state.modalAction,\n        style: {\n          padding: \"20px\"\n        },\n        loading: this.state.loading\n      }, __jsx(Modal.Section, null, __jsx(Stack, {\n        alignment: \"center\"\n      }, __jsx(Stack.Item, null, __jsx(\"div\", {\n        style: {\n          width: 100,\n          height: 100\n        }\n      }, __jsx(DropZone, {\n        openFileDialog: this.state.openFileDialog,\n        onDrop: this.handleDropZoneDrop,\n        onFileDialogClose: this.toggleOpenFileDialog\n      }, fileUpload, uploadedFile), __jsx(InlineError, {\n        message: this.state.fileError\n      }))), __jsx(Stack.Item, null, __jsx(TextField, {\n        label: \"Image Name\",\n        value: this.state.imageName,\n        onChange: this.updateImageName,\n        placeholder: \"Enter image name\",\n        error: this.state.imageNameError\n      })), __jsx(Stack.Item, null, __jsx(Autocomplete, {\n        options: this.state.categoryOptions,\n        selected: this.state.categorySelectedOptions,\n        onSelect: this.updateCategoryOptions,\n        textField: categoryTextField\n      }))))), __jsx(Modal, {\n        open: this.state.activeDeleteModal,\n        onClose: this.handleDeleteModalChange,\n        title: \"Do you really want to delete?\",\n        loading: this.state.loading,\n        primaryAction: {\n          content: \"Yes\",\n          onAction: this.confirmDelete\n        },\n        secondaryActions: {\n          content: \"No\",\n          onAction: function onAction() {\n            _this5.setState({\n              activeDeleteModal: false\n            });\n          }\n        }\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport { App as default };","map":{"version":3,"sources":["E:/Lenny/blendapp/pages/Drop.js"],"names":["React","axios","Layout","Card","ResourceList","TextStyle","Icon","Thumbnail","Modal","Stack","DropZone","InlineError","TextField","Autocomplete","DeleteMajorMonotone","EditMajorMonotone","App","props","get","response","setState","allImageData","data","allCategorys","i","push","category","filterCategory","filter","elem","index","self","indexOf","categoryArray","item","value","label","categoryInitOptions","categoryOptions","imageListItemsData","id","_id","name","filename","media","filepath","imageListItems","listItemCount","length","console","log","loading","state","getList","activeDeleteModal","addNewImage","bind","setSelectedListItems","editImage","closeModal","deleteImage","handleDropZoneDrop","toggleOpenFileDialog","updateImageName","updateCategoryOptions","updateCategoryName","handleAddImages","handleEditImages","selectedListItems","activeModal","modalAction","file","validImageTypes","openFileDialog","fileUpload","uploadedFile","fileError","imageNameError","imageCategoryError","imageName","categorySelectedOptions","categoryTextField","categoryValue","fileURL","fileFlag","nameFlag","categoryFlag","content","onAction","items","source","_dropFiles","acceptedFiles","_rejectedFiles","selected","selectedValue","map","selectedItem","matchedOption","find","option","match","filterRegex","RegExp","resultOptions","formdata","FormData","append","post","headers","then","res","type","window","URL","createObjectURL","singular","plural","shortcutActions","fontSize","padding","width","height","handleDeleteModalChange","confirmDelete","Component"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACEC,MADF,EAEEC,IAFF,EAGEC,YAHF,EAIEC,SAJF,EAKEC,IALF,EAMEC,SANF,EAOEC,KAPF,EAQEC,KARF,EASEC,QATF,EAUEC,WAVF,EAWEC,SAXF,EAYEC,YAZF,QAaO,kBAbP;AAcA,SAASC,mBAAT,EAA8BC,iBAA9B,QAAuD,wBAAvD;;IAEqBC,G;;;;;AACnB,eAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,8DAiDT;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAEehB,KAAK,CAACiB,GAAN,CAAU,gCAAV,CAFf;;AAAA;AAEFC,cAAAA,QAFE;;AAGN,oBAAKC,QAAL,CAAc;AAAEC,gBAAAA,YAAY,EAAEF,QAAQ,CAACG;AAAzB,eAAd;;AACID,cAAAA,YAJE,GAIaF,QAAQ,CAACG,IAJtB;AAKFC,cAAAA,YALE,GAKa,EALb;;AAMN,mBAASC,CAAT,IAAcH,YAAd,EAA4B;AAC1BE,gBAAAA,YAAY,CAACE,IAAb,CAAkBJ,YAAY,CAACG,CAAD,CAAZ,CAAgBE,QAAlC;AACD;;AACGC,cAAAA,cATE,GASeJ,YAAY,CAACK,MAAb,CAAoB,UAASC,IAAT,EAAeC,KAAf,EAAsBC,IAAtB,EAA4B;AACnE,uBAAOD,KAAK,KAAKC,IAAI,CAACC,OAAL,CAAaH,IAAb,CAAjB;AACD,eAFoB,CATf;AAYFI,cAAAA,aAZE,GAYc,EAZd;;AAaN,mBAAST,EAAT,IAAcG,cAAd,EAA8B;AACxBO,gBAAAA,IADwB,GACjBP,cAAc,CAACH,EAAD,CADG;AAE5BS,gBAAAA,aAAa,CAACR,IAAd,CAAmB;AACjBU,kBAAAA,KAAK,EAAED,IADU;AAEjBE,kBAAAA,KAAK,EAAEF;AAFU,iBAAnB;AAID;;AACD,oBAAKd,QAAL,CAAc;AACZiB,gBAAAA,mBAAmB,EAAEJ,aADT;AAEZK,gBAAAA,eAAe,EAAEL;AAFL,eAAd;;AAIIM,cAAAA,kBAxBE,GAwBmB,EAxBnB;;AAyBN,mBAASf,GAAT,IAAcH,YAAd,EAA4B;AACtBa,gBAAAA,KADsB,GACfb,YAAY,CAACG,GAAD,CADG;AAE1Be,gBAAAA,kBAAkB,CAACd,IAAnB,CAAwB;AACtBe,kBAAAA,EAAE,EAAEN,KAAI,CAACO,GADa;AAEtBC,kBAAAA,IAAI,EAAER,KAAI,CAACS,QAFW;AAGtBjB,kBAAAA,QAAQ,EAAEQ,KAAI,CAACR,QAHO;AAItBkB,kBAAAA,KAAK,EAAE,MAAC,SAAD;AAAW,oBAAA,MAAM,EAAEV,KAAI,CAACW,QAAxB;AAAkC,oBAAA,GAAG,EAAEX,KAAI,CAACS;AAA5C;AAJe,iBAAxB;AAMD;;AACD,oBAAKvB,QAAL,CAAc;AAAE0B,gBAAAA,cAAc,EAAEP;AAAlB,eAAd;;AACA,oBAAKnB,QAAL,CAAc;AAAE2B,gBAAAA,aAAa,EAAER,kBAAkB,CAACS;AAApC,eAAd;;AAnCM;AAAA;;AAAA;AAAA;AAAA;AAqCNC,cAAAA,OAAO,CAACC,GAAR;;AArCM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAjDS;;AAAA,oEA6IH;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,oBAAK9B,QAAL,CAAc;AAAE+B,gBAAAA,OAAO,EAAE;AAAX,eAAd;;AADc;AAAA,+CAEOlD,KAAK,CAACiB,GAAN,yDAC8B,MAAKkC,KAAL,CAAWZ,EADzC,EAFP;;AAAA;AAEVrB,cAAAA,QAFU;AAKd8B,cAAAA,OAAO,CAACC,GAAR,CAAY/B,QAAQ,CAACG,IAArB;;AACA,kBAAIH,QAAQ,CAACG,IAAT,KAAkB,SAAtB,EAAiC;AAC/B,sBAAK+B,OAAL;;AACA,sBAAKjC,QAAL,CAAc;AAAE+B,kBAAAA,OAAO,EAAE;AAAX,iBAAd;;AACA,sBAAK/B,QAAL,CAAc;AAAEkC,kBAAAA,iBAAiB,EAAE;AAArB,iBAAd;AACD,eAJD,MAIO;AACLL,gBAAAA,OAAO,CAACC,GAAR,CAAY/B,QAAQ,CAACG,IAArB;AACD;;AAZa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA7IG;;AAEjB,UAAKiC,WAAL,GAAmB,MAAKA,WAAL,CAAiBC,IAAjB,+BAAnB;AACA,UAAKC,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BD,IAA1B,+BAA5B;AACA,UAAKE,SAAL,GAAiB,MAAKA,SAAL,CAAeF,IAAf,+BAAjB;AACA,UAAKG,UAAL,GAAkB,MAAKA,UAAL,CAAgBH,IAAhB,+BAAlB;AACA,UAAKI,WAAL,GAAmB,MAAKA,WAAL,CAAiBJ,IAAjB,+BAAnB;AACA,UAAKK,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBL,IAAxB,+BAA1B;AACA,UAAKM,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BN,IAA1B,+BAA5B;AACA,UAAKO,eAAL,GAAuB,MAAKA,eAAL,CAAqBP,IAArB,+BAAvB;AACA,UAAKQ,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BR,IAA3B,+BAA7B;AACA,UAAKS,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBT,IAAxB,+BAA1B;AACA,UAAKU,eAAL,GAAuB,MAAKA,eAAL,CAAqBV,IAArB,+BAAvB;AACA,UAAKW,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBX,IAAtB,+BAAxB;AACA,UAAKJ,KAAL,GAAa;AACX/B,MAAAA,YAAY,EAAE,EADH;AAEX0B,MAAAA,aAAa,EAAE,CAFJ;AAGXD,MAAAA,cAAc,EAAE,EAHL;AAIXsB,MAAAA,iBAAiB,EAAE,EAJR;AAKXC,MAAAA,WAAW,EAAE,KALF;AAMXC,MAAAA,WAAW,EAAE,EANF;AAOXnB,MAAAA,OAAO,EAAE,KAPE;AAQXoB,MAAAA,IAAI,EAAE,IARK;AASXC,MAAAA,eAAe,EAAE,CAAC,WAAD,EAAc,YAAd,EAA4B,WAA5B,CATN;AAUXC,MAAAA,cAAc,EAAE,KAVL;AAWXC,MAAAA,UAAU,EAAE,EAXD;AAYXC,MAAAA,YAAY,EAAE,EAZH;AAaXC,MAAAA,SAAS,EAAE,EAbA;AAcXC,MAAAA,cAAc,EAAE,EAdL;AAeXC,MAAAA,kBAAkB,EAAE,EAfT;AAgBXC,MAAAA,SAAS,EAAE,EAhBA;AAiBX1C,MAAAA,mBAAmB,EAAE,EAjBV;AAkBXC,MAAAA,eAAe,EAAE,EAlBN;AAmBX0C,MAAAA,uBAAuB,EAAE,EAnBd;AAoBXC,MAAAA,iBAAiB,EAAE,EApBR;AAqBXC,MAAAA,aAAa,EAAE,EArBJ;AAsBX1C,MAAAA,EAAE,EAAE,EAtBO;AAuBX2C,MAAAA,OAAO,EAAE,EAvBE;AAwBXC,MAAAA,QAAQ,EAAE,KAxBC;AAyBXC,MAAAA,QAAQ,EAAE,KAzBC;AA0BXC,MAAAA,YAAY,EAAE,KA1BH;AA2BXhC,MAAAA,iBAAiB,EAAE;AA3BR,KAAb;AAdiB;AA2ClB;;;;;;;;;AAGC,mBAAKD,OAAL;;;;;;;;;;;kCA4CY;AACZ,WAAKjC,QAAL,CAAc;AACZiD,QAAAA,WAAW,EAAE,IADD;AAEZE,QAAAA,IAAI,EAAE,IAFM;AAGZY,QAAAA,OAAO,EAAE,EAHG;AAIZJ,QAAAA,SAAS,EAAE,EAJC;AAKZG,QAAAA,aAAa,EAAE,EALH;AAMZN,QAAAA,SAAS,EAAE,EANC;AAOZC,QAAAA,cAAc,EAAE,EAPJ;AAQZC,QAAAA,kBAAkB,EAAE,EARR;AASZR,QAAAA,WAAW,EAAE;AACXiB,UAAAA,OAAO,EAAE,KADE;AAEXC,UAAAA,QAAQ,EAAE,KAAKtB;AAFJ;AATD,OAAd;AAcD;;;yCAEoBuB,K,EAAO;AAC1BxC,MAAAA,OAAO,CAACC,GAAR,CAAYuC,KAAZ;AACD;;;8BAESjD,E,EAAIE,I,EAAME,K,EAAOlB,Q,EAAU;AACnCuB,MAAAA,OAAO,CAACC,GAAR,CAAYV,EAAZ,EAAgBE,IAAhB,EAAsBE,KAAtB,EAA6BlB,QAA7B;AACA,WAAKN,QAAL,CAAc;AACZkD,QAAAA,WAAW,EAAE;AACXiB,UAAAA,OAAO,EAAE,MADE;AAEXC,UAAAA,QAAQ,EAAE,KAAKrB;AAFJ,SADD;AAKZS,QAAAA,SAAS,EAAE,EALC;AAMZC,QAAAA,cAAc,EAAE,EANJ;AAOZC,QAAAA,kBAAkB,EAAE,EAPR;AAQZtC,QAAAA,EAAE,EAAEA,EARQ;AASZuC,QAAAA,SAAS,EAAErC,IATC;AAUZ6B,QAAAA,IAAI,EAAE,IAVM;AAWZY,QAAAA,OAAO,EAAEvC,KAAK,CAAC3B,KAAN,CAAYyE,MAXT;AAYZR,QAAAA,aAAa,EAAExD,QAZH;AAaZ2C,QAAAA,WAAW,EAAE,IAbD;AAcZe,QAAAA,QAAQ,EAAE,KAdE;AAeZC,QAAAA,QAAQ,EAAE,KAfE;AAgBZC,QAAAA,YAAY,EAAE;AAhBF,OAAd;AAkBD;;;gCAEW9C,E,EAAI;AACd,WAAKpB,QAAL,CAAc;AACZoB,QAAAA,EAAE,EAAEA,EADQ;AAEZc,QAAAA,iBAAiB,EAAE;AAFP,OAAd;AAIAL,MAAAA,OAAO,CAACC,GAAR,CAAYV,EAAZ;AACD;;;iCAiBY;AACX,WAAKpB,QAAL,CAAc;AAAEiD,QAAAA,WAAW,EAAE;AAAf,OAAd;AACD;;;uCAEkBsB,U,EAAYC,a,EAAeC,c,EAAgB;AAC5D,WAAKzE,QAAL,CAAc;AACZmD,QAAAA,IAAI,EAAEqB,aAAa,CAAC,CAAD,CADP;AAEZhB,QAAAA,SAAS,EAAE,EAFC;AAGZQ,QAAAA,QAAQ,EAAE,IAHE;AAIZD,QAAAA,OAAO,EAAE;AAJG,OAAd;AAMD;;;2CAEsB;AACrB,WAAK/D,QAAL,CAAc;AAAEqD,QAAAA,cAAc,EAAE,CAAC,KAAKrB,KAAL,CAAWqB;AAA9B,OAAd;AACAxB,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD;;;oCAEef,K,EAAO;AACrB,WAAKf,QAAL,CAAc;AACZ2D,QAAAA,SAAS,EAAE5C,KADC;AAEZ0C,QAAAA,cAAc,EAAE,EAFJ;AAGZQ,QAAAA,QAAQ,EAAE;AAHE,OAAd;AAKD;;;0CAEqBS,Q,EAAU;AAAA;;AAC9B,UAAMC,aAAa,GAAGD,QAAQ,CAACE,GAAT,CAAa,UAAAC,YAAY,EAAI;AACjD,YAAMC,aAAa,GAAG,MAAI,CAAC9C,KAAL,CAAWd,eAAX,CAA2B6D,IAA3B,CAAgC,UAAAC,MAAM,EAAI;AAC9D,iBAAOA,MAAM,CAACjE,KAAP,CAAakE,KAAb,CAAmBJ,YAAnB,CAAP;AACD,SAFqB,CAAtB;;AAGA,eAAOC,aAAa,IAAIA,aAAa,CAAC9D,KAAtC;AACD,OALqB,CAAtB;AAMA,WAAKhB,QAAL,CAAc;AAAE4D,QAAAA,uBAAuB,EAAE;AAA3B,OAAd;AACA,WAAKf,kBAAL,CAAwB8B,aAAa,CAAC,CAAD,CAArC;AACD;;;uCAEkB5D,K,EAAO;AACxB,WAAKf,QAAL,CAAc;AACZ8D,QAAAA,aAAa,EAAE/C,KADH;AAEZ2C,QAAAA,kBAAkB,EAAE,EAFR;AAGZQ,QAAAA,YAAY,EAAE;AAHF,OAAd;;AAKA,UAAI,KAAKlC,KAAL,CAAW8B,aAAX,KAA6B,EAAjC,EAAqC;AACnC,aAAK9D,QAAL,CAAc;AAAE4D,UAAAA,uBAAuB,EAAE,KAAK5B,KAAL,CAAWd;AAAtC,SAAd;AACD;;AAED,UAAMgE,WAAW,GAAG,IAAIC,MAAJ,CAAWpE,KAAX,EAAkB,GAAlB,CAApB;AACA,UAAMqE,aAAa,GAAG,KAAKpD,KAAL,CAAWf,mBAAX,CAA+BT,MAA/B,CAAsC,UAAAwE,MAAM;AAAA,eAChEA,MAAM,CAAChE,KAAP,CAAaiE,KAAb,CAAmBC,WAAnB,CADgE;AAAA,OAA5C,CAAtB;AAGA,WAAKlF,QAAL,CAAc;AAAEkB,QAAAA,eAAe,EAAEkE;AAAnB,OAAd;AACD;;;sCAEiB;AAAA;;AAChBvD,MAAAA,OAAO,CAACC,GAAR,CACE,KAAKE,KAAL,CAAWmB,IADb,EAEE,KAAKnB,KAAL,CAAW2B,SAFb,EAGE,KAAK3B,KAAL,CAAW8B,aAHb;;AAKA,UACE,KAAK9B,KAAL,CAAWmB,IAAX,KAAoB,IAApB,IACA,KAAKnB,KAAL,CAAW2B,SAAX,KAAyB,EADzB,IAEA,KAAK3B,KAAL,CAAW8B,aAAX,KAA6B,EAH/B,EAIE;AACA,aAAK9D,QAAL,CAAc;AACZwD,UAAAA,SAAS,EAAE,YADC;AAEZC,UAAAA,cAAc,EAAE,iBAFJ;AAGZC,UAAAA,kBAAkB,EAAE;AAHR,SAAd;AAKA;AACD,OAXD,MAWO,IAAI,KAAK1B,KAAL,CAAWmB,IAAX,KAAoB,IAApB,IAA4B,KAAKnB,KAAL,CAAW2B,SAAX,KAAyB,EAAzD,EAA6D;AAClE,aAAK3D,QAAL,CAAc;AACZwD,UAAAA,SAAS,EAAE,YADC;AAEZC,UAAAA,cAAc,EAAE;AAFJ,SAAd;AAIA;AACD,OANM,MAMA,IAAI,KAAKzB,KAAL,CAAWmB,IAAX,KAAoB,IAApB,IAA4B,KAAKnB,KAAL,CAAW8B,aAAX,KAA6B,EAA7D,EAAiE;AACtE,aAAK9D,QAAL,CAAc;AACZwD,UAAAA,SAAS,EAAE,YADC;AAEZE,UAAAA,kBAAkB,EAAE;AAFR,SAAd;AAIA;AACD,OANM,MAMA,IAAI,KAAK1B,KAAL,CAAW2B,SAAX,KAAyB,EAAzB,IAA+B,KAAK3B,KAAL,CAAW8B,aAAX,KAA6B,EAAhE,EAAoE;AACzE,aAAK9D,QAAL,CAAc;AACZyD,UAAAA,cAAc,EAAE,iBADJ;AAEZC,UAAAA,kBAAkB,EAAE;AAFR,SAAd;AAIA;AACD,OANM,MAMA,IAAI,KAAK1B,KAAL,CAAWmB,IAAX,KAAoB,IAAxB,EAA8B;AACnC,aAAKnD,QAAL,CAAc;AACZwD,UAAAA,SAAS,EAAE;AADC,SAAd;AAGA;AACD,OALM,MAKA,IAAI,KAAKxB,KAAL,CAAW2B,SAAX,KAAyB,EAA7B,EAAiC;AACtC,aAAK3D,QAAL,CAAc;AACZyD,UAAAA,cAAc,EAAE;AADJ,SAAd;AAGA;AACD,OALM,MAKA,IAAI,KAAKzB,KAAL,CAAW8B,aAAX,KAA6B,EAAjC,EAAqC;AAC1C,aAAK9D,QAAL,CAAc;AACZ0D,UAAAA,kBAAkB,EAAE;AADR,SAAd;AAGA;AACD;;AACD,WAAK,IAAItD,CAAT,IAAc,KAAK4B,KAAL,CAAW/B,YAAzB,EAAuC;AACrC,YAAIa,IAAI,GAAG,KAAKkB,KAAL,CAAW/B,YAAX,CAAwBG,CAAxB,CAAX;;AACA,YAAIU,IAAI,CAACS,QAAL,KAAkB,KAAKS,KAAL,CAAW2B,SAAjC,EAA4C;AAC1C,eAAK3D,QAAL,CAAc;AACZyD,YAAAA,cAAc,EAAE;AADJ,WAAd;AAGA;AACD;AACF;;AACD,WAAKzD,QAAL,CAAc;AAAE+B,QAAAA,OAAO,EAAE;AAAX,OAAd;AACA,UAAIsD,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwB,KAAKvD,KAAL,CAAWmB,IAAnC;AACAkC,MAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4B,KAAKvD,KAAL,CAAW2B,SAAvC;AACA0B,MAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4B,KAAKvD,KAAL,CAAW8B,aAAvC;AACAjF,MAAAA,KAAK,CACF2G,IADH,CACQ,gCADR,EAC0CH,QAD1C,EACoD;AAChDI,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AADuC,OADpD,EAMGC,IANH,CAMQ,UAAAC,GAAG,EAAI;AACX,YAAIA,GAAG,CAACzF,IAAJ,KAAa,SAAjB,EAA4B;AAC1B,UAAA,MAAI,CAACF,QAAL,CAAc;AAAEiD,YAAAA,WAAW,EAAE;AAAf,WAAd;;AACA,UAAA,MAAI,CAAChB,OAAL;;AACA,UAAA,MAAI,CAACjC,QAAL,CAAc;AAAE+B,YAAAA,OAAO,EAAE;AAAX,WAAd;;AACAF,UAAAA,OAAO,CAACC,GAAR,CAAY6D,GAAG,CAACzF,IAAhB;AACD,SALD,MAKO;AACL2B,UAAAA,OAAO,CAACC,GAAR,CAAY6D,GAAG,CAACzF,IAAhB;AACD;AACF,OAfH;AAgBD;;;uCAEkB;AAAA;;AACjB,UAAI,KAAK8B,KAAL,CAAW2B,SAAX,KAAyB,EAAzB,IAA+B,KAAK3B,KAAL,CAAW8B,aAAX,KAA6B,EAAhE,EAAoE;AAClE,aAAK9D,QAAL,CAAc;AACZyD,UAAAA,cAAc,EAAE,iBADJ;AAEZC,UAAAA,kBAAkB,EAAE;AAFR,SAAd;AAIA;AACD,OAND,MAMO,IAAI,KAAK1B,KAAL,CAAW2B,SAAX,KAAyB,EAA7B,EAAiC;AACtC,aAAK3D,QAAL,CAAc;AACZyD,UAAAA,cAAc,EAAE;AADJ,SAAd;AAGA;AACD,OALM,MAKA,IAAI,KAAKzB,KAAL,CAAW8B,aAAX,KAA6B,EAAjC,EAAqC;AAC1C,aAAK9D,QAAL,CAAc;AACZ0D,UAAAA,kBAAkB,EAAE;AADR,SAAd;AAGA;AACD;;AACD,WAAK,IAAItD,CAAT,IAAc,KAAK4B,KAAL,CAAW/B,YAAzB,EAAuC;AACrC,YAAIa,IAAI,GAAG,KAAKkB,KAAL,CAAW/B,YAAX,CAAwBG,CAAxB,CAAX;;AACA,YAAIU,IAAI,CAACS,QAAL,KAAkB,KAAKS,KAAL,CAAW2B,SAAjC,EAA4C;AAC1C,cAAI,KAAK3B,KAAL,CAAWiC,QAAf,EAAyB;AACvB,iBAAKjE,QAAL,CAAc;AACZyD,cAAAA,cAAc,EAAE;AADJ,aAAd;AAGA;AACD;AACF;AACF;;AACD,UAAI,CAAC,KAAKzB,KAAL,CAAWgC,QAAZ,IAAwB,CAAC,KAAKhC,KAAL,CAAWiC,QAApC,IAAgD,CAAC,KAAKjC,KAAL,CAAWkC,YAAhE,EAA8E;AAC5E,aAAKlE,QAAL,CAAc;AAAEiD,UAAAA,WAAW,EAAE;AAAf,SAAd;AACA;AACD;;AAED,UAAI,KAAKjB,KAAL,CAAWgC,QAAf,EAAyB;AACvB,aAAKhE,QAAL,CAAc;AAAE+B,UAAAA,OAAO,EAAE;AAAX,SAAd;AACA,YAAIsD,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,QAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwB,KAAKvD,KAAL,CAAWmB,IAAnC;AACAkC,QAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4B,KAAKvD,KAAL,CAAW2B,SAAvC;AACA0B,QAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4B,KAAKvD,KAAL,CAAW8B,aAAvC;AACAuB,QAAAA,QAAQ,CAACE,MAAT,CAAgB,IAAhB,EAAsB,KAAKvD,KAAL,CAAWZ,EAAjC;AACAvC,QAAAA,KAAK,CACF2G,IADH,CACQ,6CADR,EACuDH,QADvD,EACiE;AAC7DI,UAAAA,OAAO,EAAE;AACP,4BAAgB;AADT;AADoD,SADjE,EAMGC,IANH,CAMQ,UAAAC,GAAG,EAAI;AACX,cAAIA,GAAG,CAACzF,IAAJ,KAAa,SAAjB,EAA4B;AAC1B,YAAA,MAAI,CAAC+B,OAAL;;AACA,YAAA,MAAI,CAACjC,QAAL,CAAc;AACZiD,cAAAA,WAAW,EAAE,KADD;AAEZlB,cAAAA,OAAO,EAAE;AAFG,aAAd;;AAIAF,YAAAA,OAAO,CAACC,GAAR,CAAY6D,GAAG,CAACzF,IAAhB;AACD,WAPD,MAOO;AACL2B,YAAAA,OAAO,CAACC,GAAR,CAAY6D,GAAG,CAACzF,IAAhB;AACD;AACF,SAjBH;AAkBD,OAzBD,MAyBO;AACL,YAAI,KAAK8B,KAAL,CAAWiC,QAAf,EAAyB;AACvBpC,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA,eAAK9B,QAAL,CAAc;AAAE+B,YAAAA,OAAO,EAAE;AAAX,WAAd;AACA,cAAIsD,SAAQ,GAAG;AACbjE,YAAAA,EAAE,EAAE,KAAKY,KAAL,CAAWZ,EADF;AAEbG,YAAAA,QAAQ,EAAE,KAAKS,KAAL,CAAW2B,SAFR;AAGbrD,YAAAA,QAAQ,EAAE,KAAK0B,KAAL,CAAW8B;AAHR,WAAf;AAKAjF,UAAAA,KAAK,CACF2G,IADH,CACQ,gDADR,EAC0D;AACtDtF,YAAAA,IAAI,EAAEmF;AADgD,WAD1D,EAIGK,IAJH,CAIQ,UAAAC,GAAG,EAAI;AACX,gBAAIA,GAAG,CAACzF,IAAJ,KAAa,SAAjB,EAA4B;AAC1B,cAAA,MAAI,CAAC+B,OAAL;;AACA,cAAA,MAAI,CAACjC,QAAL,CAAc;AACZiD,gBAAAA,WAAW,EAAE,KADD;AAEZlB,gBAAAA,OAAO,EAAE;AAFG,eAAd;;AAIAF,cAAAA,OAAO,CAACC,GAAR,CAAY6D,GAAG,CAACzF,IAAhB;AACD,aAPD,MAOO;AACL2B,cAAAA,OAAO,CAACC,GAAR,CAAY6D,GAAG,CAACzF,IAAhB;AACD;AACF,WAfH;AAgBD,SAxBD,MAwBO,IAAI,KAAK8B,KAAL,CAAWkC,YAAf,EAA6B;AAClCrC,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,eAAK9B,QAAL,CAAc;AAAE+B,YAAAA,OAAO,EAAE;AAAX,WAAd;AACA,cAAIsD,UAAQ,GAAG;AACbjE,YAAAA,EAAE,EAAE,KAAKY,KAAL,CAAWZ,EADF;AAEbd,YAAAA,QAAQ,EAAE,KAAK0B,KAAL,CAAW8B;AAFR,WAAf;AAIAjF,UAAAA,KAAK,CACF2G,IADH,CACQ,gDADR,EAC0D;AACtDtF,YAAAA,IAAI,EAAEmF;AADgD,WAD1D,EAIGK,IAJH,CAIQ,UAAAC,GAAG,EAAI;AACX,gBAAIA,GAAG,CAACzF,IAAJ,KAAa,SAAjB,EAA4B;AAC1B,cAAA,MAAI,CAAC+B,OAAL;;AACA,cAAA,MAAI,CAACjC,QAAL,CAAc;AACZiD,gBAAAA,WAAW,EAAE,KADD;AAEZlB,gBAAAA,OAAO,EAAE;AAFG,eAAd;;AAIAF,cAAAA,OAAO,CAACC,GAAR,CAAY6D,GAAG,CAACzF,IAAhB;AACD,aAPD,MAOO;AACL2B,cAAAA,OAAO,CAACC,GAAR,CAAY6D,GAAG,CAACzF,IAAhB;AACD;AACF,WAfH;AAgBD;AACF;AACF;;;6BAEQ;AAAA;;AACP,UAAM2D,iBAAiB,GACrB,MAAC,YAAD,CAAc,SAAd;AACE,QAAA,QAAQ,EAAE,KAAKhB,kBADjB;AAEE,QAAA,KAAK,EAAC,gBAFR;AAGE,QAAA,KAAK,EAAE,KAAKb,KAAL,CAAW8B,aAHpB;AAIE,QAAA,WAAW,EAAC,gBAJd;AAKE,QAAA,KAAK,EAAE,KAAK9B,KAAL,CAAW0B;AALpB,QADF;;AASA,UAAMJ,UAAU,GACd,KAAKtB,KAAL,CAAW+B,OAAX,KAAuB,EAAvB,GACE,CAAC,KAAK/B,KAAL,CAAWmB,IAAZ,IAAoB,MAAC,QAAD,CAAU,UAAV,OADtB,GAGE,MAAC,KAAD,QACE,MAAC,SAAD;AAAW,QAAA,IAAI,EAAC,OAAhB;AAAwB,QAAA,GAAG,EAAC,MAA5B;AAAmC,QAAA,MAAM,EAAE,KAAKnB,KAAL,CAAW+B;AAAtD,QADF,CAJJ;;AASA,UAAMR,YAAY,GAAG,KAAKvB,KAAL,CAAWmB,IAAX,IACnB,MAAC,KAAD,QACE,MAAC,SAAD;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,GAAG,EAAE,KAAKnB,KAAL,CAAWmB,IAAX,CAAgB7B,IAFvB;AAGE,QAAA,MAAM,EACJ,KAAKU,KAAL,CAAWoB,eAAX,CAA2BxC,OAA3B,CAAmC,KAAKoB,KAAL,CAAWmB,IAAX,CAAgByC,IAAnD,IAA2D,CAA3D,GACIC,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2B,KAAK/D,KAAL,CAAWmB,IAAtC,CADJ,GAEI;AANR,QADF,CADF;;AAcA,aACE,mBACE,MAAC,MAAD,QACE,MAAC,MAAD,CAAQ,OAAR,QACE,MAAC,IAAD;AACE,QAAA,KAAK,EAAC,aADR;AAEE,QAAA,OAAO,EAAE,CACP;AACEgB,UAAAA,OAAO,EAAE,gBADX;AAEEC,UAAAA,QAAQ,EAAE,KAAKjC;AAFjB,SADO;AAFX,SASE,MAAC,IAAD,CAAM,OAAN,QACE,MAAC,SAAD;AAAW,QAAA,SAAS,EAAC;AAArB,SACG,KAAKH,KAAL,CAAWL,aADd,iBADF,CATF,EAcE,MAAC,IAAD,CAAM,OAAN,QACE,MAAC,YAAD;AACE,QAAA,YAAY,EAAE;AAAEqE,UAAAA,QAAQ,EAAE,OAAZ;AAAqBC,UAAAA,MAAM,EAAE;AAA7B,SADhB;AAEE,QAAA,KAAK,EAAE,KAAKjE,KAAL,CAAWN,cAFpB;AAGE,QAAA,aAAa,EAAE,KAAKM,KAAL,CAAWgB,iBAH5B;AAIE,QAAA,iBAAiB,EAAE,KAAKX,oBAJ1B;AAKE,QAAA,UAAU,EAAE,oBAAAvB,IAAI,EAAI;AAAA,cACVM,EADU,GACoBN,IADpB,CACVM,EADU;AAAA,cACNE,IADM,GACoBR,IADpB,CACNQ,IADM;AAAA,cACAE,KADA,GACoBV,IADpB,CACAU,KADA;AAAA,cACOlB,QADP,GACoBQ,IADpB,CACOR,QADP;AAElB,cAAM4F,eAAe,GAAG,CACtB;AACE/B,YAAAA,OAAO,EACL,MAAC,IAAD;AAAM,cAAA,MAAM,EAAExE,iBAAd;AAAiC,cAAA,KAAK,EAAC;AAAvC,cAFJ;AAIEyE,YAAAA,QAAQ,EAAE;AAAA,qBACR,MAAI,CAAC9B,SAAL,CAAelB,EAAf,EAAmBE,IAAnB,EAAyBE,KAAzB,EAAgClB,QAAhC,CADQ;AAAA;AAJZ,WADsB,EAQtB;AACE6D,YAAAA,OAAO,EACL,MAAC,IAAD;AAAM,cAAA,MAAM,EAAEzE,mBAAd;AAAmC,cAAA,KAAK,EAAC;AAAzC,cAFJ;AAIE0E,YAAAA,QAAQ,EAAE;AAAA,qBAAM,MAAI,CAAC5B,WAAL,CAAiBpB,EAAjB,CAAN;AAAA;AAJZ,WARsB,CAAxB;AAgBA,iBACE,MAAC,YAAD,CAAc,IAAd;AACE,YAAA,EAAE,EAAEA,EADN;AAEE,YAAA,KAAK,EAAEI,KAFT;AAGE,YAAA,kBAAkB,6BAAsBF,IAAtB,CAHpB;AAIE,YAAA,eAAe,EAAE4E,eAJnB;AAKE,YAAA,cAAc;AALhB,aAOE,kBACE,MAAC,SAAD;AAAW,YAAA,SAAS,EAAC;AAArB,aACE;AAAM,YAAA,KAAK,EAAE;AAAEC,cAAAA,QAAQ,EAAE;AAAZ;AAAb,sBADF,EAEG7E,IAFH,CADF,CAPF,EAaE,kBACE,MAAC,SAAD;AAAW,YAAA,SAAS,EAAC;AAArB,aACE;AAAM,YAAA,KAAK,EAAE;AAAE6E,cAAAA,QAAQ,EAAE;AAAZ;AAAb,0BADF,EAEG7F,QAFH,CADF,CAbF,CADF;AAsBD;AA7CH,QADF,CAdF,CADF,CADF,CADF,EAqEE,MAAC,KAAD;AACE,QAAA,IAAI,EAAE,KAAK0B,KAAL,CAAWiB,WADnB;AAEE,QAAA,OAAO,EAAE,KAAKV,UAFhB;AAGE,QAAA,KAAK,EAAC,WAHR;AAIE,QAAA,aAAa,EAAE,KAAKP,KAAL,CAAWkB,WAJ5B;AAKE,QAAA,KAAK,EAAE;AAAEkD,UAAAA,OAAO,EAAE;AAAX,SALT;AAME,QAAA,OAAO,EAAE,KAAKpE,KAAL,CAAWD;AANtB,SAQE,MAAC,KAAD,CAAO,OAAP,QACE,MAAC,KAAD;AAAO,QAAA,SAAS,EAAC;AAAjB,SACE,MAAC,KAAD,CAAO,IAAP,QACE;AAAK,QAAA,KAAK,EAAE;AAAEsE,UAAAA,KAAK,EAAE,GAAT;AAAcC,UAAAA,MAAM,EAAE;AAAtB;AAAZ,SACE,MAAC,QAAD;AACE,QAAA,cAAc,EAAE,KAAKtE,KAAL,CAAWqB,cAD7B;AAEE,QAAA,MAAM,EAAE,KAAKZ,kBAFf;AAGE,QAAA,iBAAiB,EAAE,KAAKC;AAH1B,SAKGY,UALH,EAMGC,YANH,CADF,EASE,MAAC,WAAD;AAAa,QAAA,OAAO,EAAE,KAAKvB,KAAL,CAAWwB;AAAjC,QATF,CADF,CADF,EAcE,MAAC,KAAD,CAAO,IAAP,QACE,MAAC,SAAD;AACE,QAAA,KAAK,EAAC,YADR;AAEE,QAAA,KAAK,EAAE,KAAKxB,KAAL,CAAW2B,SAFpB;AAGE,QAAA,QAAQ,EAAE,KAAKhB,eAHjB;AAIE,QAAA,WAAW,EAAC,kBAJd;AAKE,QAAA,KAAK,EAAE,KAAKX,KAAL,CAAWyB;AALpB,QADF,CAdF,EAuBE,MAAC,KAAD,CAAO,IAAP,QACE,MAAC,YAAD;AACE,QAAA,OAAO,EAAE,KAAKzB,KAAL,CAAWd,eADtB;AAEE,QAAA,QAAQ,EAAE,KAAKc,KAAL,CAAW4B,uBAFvB;AAGE,QAAA,QAAQ,EAAE,KAAKhB,qBAHjB;AAIE,QAAA,SAAS,EAAEiB;AAJb,QADF,CAvBF,CADF,CARF,CArEF,EAgHE,MAAC,KAAD;AACE,QAAA,IAAI,EAAE,KAAK7B,KAAL,CAAWE,iBADnB;AAEE,QAAA,OAAO,EAAE,KAAKqE,uBAFhB;AAGE,QAAA,KAAK,EAAC,+BAHR;AAIE,QAAA,OAAO,EAAE,KAAKvE,KAAL,CAAWD,OAJtB;AAKE,QAAA,aAAa,EAAE;AACboC,UAAAA,OAAO,EAAE,KADI;AAEbC,UAAAA,QAAQ,EAAE,KAAKoC;AAFF,SALjB;AASE,QAAA,gBAAgB,EAAE;AAChBrC,UAAAA,OAAO,EAAE,IADO;AAEhBC,UAAAA,QAAQ,EAAE,oBAAM;AACd,YAAA,MAAI,CAACpE,QAAL,CAAc;AAAEkC,cAAAA,iBAAiB,EAAE;AAArB,aAAd;AACD;AAJe;AATpB,QAhHF,CADF;AAmID;;;;EAzjB8BtD,KAAK,CAAC6H,S;;SAAlB7G,G","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Layout,\r\n  Card,\r\n  ResourceList,\r\n  TextStyle,\r\n  Icon,\r\n  Thumbnail,\r\n  Modal,\r\n  Stack,\r\n  DropZone,\r\n  InlineError,\r\n  TextField,\r\n  Autocomplete\r\n} from \"@shopify/polaris\";\r\nimport { DeleteMajorMonotone, EditMajorMonotone } from \"@shopify/polaris-icons\";\r\n\r\nexport default class App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.addNewImage = this.addNewImage.bind(this);\r\n    this.setSelectedListItems = this.setSelectedListItems.bind(this);\r\n    this.editImage = this.editImage.bind(this);\r\n    this.closeModal = this.closeModal.bind(this);\r\n    this.deleteImage = this.deleteImage.bind(this);\r\n    this.handleDropZoneDrop = this.handleDropZoneDrop.bind(this);\r\n    this.toggleOpenFileDialog = this.toggleOpenFileDialog.bind(this);\r\n    this.updateImageName = this.updateImageName.bind(this);\r\n    this.updateCategoryOptions = this.updateCategoryOptions.bind(this);\r\n    this.updateCategoryName = this.updateCategoryName.bind(this);\r\n    this.handleAddImages = this.handleAddImages.bind(this);\r\n    this.handleEditImages = this.handleEditImages.bind(this);\r\n    this.state = {\r\n      allImageData: [],\r\n      listItemCount: 0,\r\n      imageListItems: [],\r\n      selectedListItems: [],\r\n      activeModal: false,\r\n      modalAction: {},\r\n      loading: false,\r\n      file: null,\r\n      validImageTypes: [\"image/gif\", \"image/jpeg\", \"image/png\"],\r\n      openFileDialog: false,\r\n      fileUpload: \"\",\r\n      uploadedFile: \"\",\r\n      fileError: \"\",\r\n      imageNameError: \"\",\r\n      imageCategoryError: \"\",\r\n      imageName: \"\",\r\n      categoryInitOptions: [],\r\n      categoryOptions: [],\r\n      categorySelectedOptions: [],\r\n      categoryTextField: \"\",\r\n      categoryValue: \"\",\r\n      id: \"\",\r\n      fileURL: \"\",\r\n      fileFlag: false,\r\n      nameFlag: false,\r\n      categoryFlag: false,\r\n      activeDeleteModal: false\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.getList();\r\n  }\r\n  \r\n  getList = async () => {\r\n    try {\r\n      let response = await axios.get(\"https://54a1da76.ngrok.io/drop\");\r\n      this.setState({ allImageData: response.data });\r\n      let allImageData = response.data;\r\n      let allCategorys = [];\r\n      for (let i in allImageData) {\r\n        allCategorys.push(allImageData[i].category);\r\n      }\r\n      let filterCategory = allCategorys.filter(function(elem, index, self) {\r\n        return index === self.indexOf(elem);\r\n      });\r\n      let categoryArray = [];\r\n      for (let i in filterCategory) {\r\n        let item = filterCategory[i];\r\n        categoryArray.push({\r\n          value: item,\r\n          label: item\r\n        });\r\n      }\r\n      this.setState({\r\n        categoryInitOptions: categoryArray,\r\n        categoryOptions: categoryArray\r\n      });\r\n      let imageListItemsData = [];\r\n      for (let i in allImageData) {\r\n        let item = allImageData[i];\r\n        imageListItemsData.push({\r\n          id: item._id,\r\n          name: item.filename,\r\n          category: item.category,\r\n          media: <Thumbnail source={item.filepath} alt={item.filename} />\r\n        });\r\n      }\r\n      this.setState({ imageListItems: imageListItemsData });\r\n      this.setState({ listItemCount: imageListItemsData.length });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  addNewImage() {\r\n    this.setState({\r\n      activeModal: true,\r\n      file: null,\r\n      fileURL: \"\",\r\n      imageName: \"\",\r\n      categoryValue: \"\",\r\n      fileError: \"\",\r\n      imageNameError: \"\",\r\n      imageCategoryError: \"\",\r\n      modalAction: {\r\n        content: \"Add\",\r\n        onAction: this.handleAddImages\r\n      }\r\n    });\r\n  }\r\n\r\n  setSelectedListItems(items) {\r\n    console.log(items);\r\n  }\r\n\r\n  editImage(id, name, media, category) {\r\n    console.log(id, name, media, category);\r\n    this.setState({\r\n      modalAction: {\r\n        content: \"Save\",\r\n        onAction: this.handleEditImages\r\n      },\r\n      fileError: \"\",\r\n      imageNameError: \"\",\r\n      imageCategoryError: \"\",\r\n      id: id,\r\n      imageName: name,\r\n      file: null,\r\n      fileURL: media.props.source,\r\n      categoryValue: category,\r\n      activeModal: true,\r\n      fileFlag: false,\r\n      nameFlag: false,\r\n      categoryFlag: false\r\n    });\r\n  }\r\n\r\n  deleteImage(id) {\r\n    this.setState({\r\n      id: id,\r\n      activeDeleteModal: true\r\n    });\r\n    console.log(id);\r\n  }\r\n\r\n  confirmDelete = async () => {\r\n    this.setState({ loading: true });\r\n    let response = await axios.get(\r\n      `https://54a1da76.ngrok.io/drop/deleteImage?id=${this.state.id}`\r\n    );\r\n    console.log(response.data);\r\n    if (response.data === \"success\") {\r\n      this.getList();\r\n      this.setState({ loading: false });\r\n      this.setState({ activeDeleteModal: false });\r\n    } else {\r\n      console.log(response.data);\r\n    }\r\n  };\r\n\r\n  closeModal() {\r\n    this.setState({ activeModal: false });\r\n  }\r\n\r\n  handleDropZoneDrop(_dropFiles, acceptedFiles, _rejectedFiles) {\r\n    this.setState({\r\n      file: acceptedFiles[0],\r\n      fileError: \"\",\r\n      fileFlag: true,\r\n      fileURL: \"\"\r\n    });\r\n  }\r\n\r\n  toggleOpenFileDialog() {\r\n    this.setState({ openFileDialog: !this.state.openFileDialog });\r\n    console.log(\"toggle\");\r\n  }\r\n\r\n  updateImageName(value) {\r\n    this.setState({\r\n      imageName: value,\r\n      imageNameError: \"\",\r\n      nameFlag: true\r\n    });\r\n  }\r\n\r\n  updateCategoryOptions(selected) {\r\n    const selectedValue = selected.map(selectedItem => {\r\n      const matchedOption = this.state.categoryOptions.find(option => {\r\n        return option.value.match(selectedItem);\r\n      });\r\n      return matchedOption && matchedOption.label;\r\n    });\r\n    this.setState({ categorySelectedOptions: [] });\r\n    this.updateCategoryName(selectedValue[0]);\r\n  }\r\n\r\n  updateCategoryName(value) {\r\n    this.setState({\r\n      categoryValue: value,\r\n      imageCategoryError: \"\",\r\n      categoryFlag: true\r\n    });\r\n    if (this.state.categoryValue === \"\") {\r\n      this.setState({ categorySelectedOptions: this.state.categoryOptions });\r\n    }\r\n\r\n    const filterRegex = new RegExp(value, \"i\");\r\n    const resultOptions = this.state.categoryInitOptions.filter(option =>\r\n      option.label.match(filterRegex)\r\n    );\r\n    this.setState({ categoryOptions: resultOptions });\r\n  }\r\n\r\n  handleAddImages() {\r\n    console.log(\r\n      this.state.file,\r\n      this.state.imageName,\r\n      this.state.categoryValue\r\n    );\r\n    if (\r\n      this.state.file === null &&\r\n      this.state.imageName === \"\" &&\r\n      this.state.categoryValue === \"\"\r\n    ) {\r\n      this.setState({\r\n        fileError: \"Need Image\",\r\n        imageNameError: \"Need Image Name\",\r\n        imageCategoryError: \"Need Category\"\r\n      });\r\n      return;\r\n    } else if (this.state.file === null && this.state.imageName === \"\") {\r\n      this.setState({\r\n        fileError: \"Need Image\",\r\n        imageNameError: \"Need Image Name\"\r\n      });\r\n      return;\r\n    } else if (this.state.file === null && this.state.categoryValue === \"\") {\r\n      this.setState({\r\n        fileError: \"Need Image\",\r\n        imageCategoryError: \"Need Category\"\r\n      });\r\n      return;\r\n    } else if (this.state.imageName === \"\" && this.state.categoryValue === \"\") {\r\n      this.setState({\r\n        imageNameError: \"Need Image Name\",\r\n        imageCategoryError: \"Need Category\"\r\n      });\r\n      return;\r\n    } else if (this.state.file === null) {\r\n      this.setState({\r\n        fileError: \"Need Image\"\r\n      });\r\n      return;\r\n    } else if (this.state.imageName === \"\") {\r\n      this.setState({\r\n        imageNameError: \"Need Image Name\"\r\n      });\r\n      return;\r\n    } else if (this.state.categoryValue === \"\") {\r\n      this.setState({\r\n        imageCategoryError: \"Need Category\"\r\n      });\r\n      return;\r\n    }\r\n    for (let i in this.state.allImageData) {\r\n      let item = this.state.allImageData[i];\r\n      if (item.filename === this.state.imageName) {\r\n        this.setState({\r\n          imageNameError: \"Image Name Exist\"\r\n        });\r\n        return;\r\n      }\r\n    }\r\n    this.setState({ loading: true });\r\n    let formdata = new FormData();\r\n    formdata.append(\"file\", this.state.file);\r\n    formdata.append(\"filename\", this.state.imageName);\r\n    formdata.append(\"category\", this.state.categoryValue);\r\n    axios\r\n      .post(\"https://54a1da76.ngrok.io/drop\", formdata, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\"\r\n        }\r\n      })\r\n      .then(res => {\r\n        if (res.data === \"success\") {\r\n          this.setState({ activeModal: false });\r\n          this.getList();\r\n          this.setState({ loading: false });\r\n          console.log(res.data);\r\n        } else {\r\n          console.log(res.data);\r\n        }\r\n      });\r\n  }\r\n\r\n  handleEditImages() {\r\n    if (this.state.imageName === \"\" && this.state.categoryValue === \"\") {\r\n      this.setState({\r\n        imageNameError: \"Need Image Name\",\r\n        imageCategoryError: \"Need Category\"\r\n      });\r\n      return;\r\n    } else if (this.state.imageName === \"\") {\r\n      this.setState({\r\n        imageNameError: \"Need Image Name\"\r\n      });\r\n      return;\r\n    } else if (this.state.categoryValue === \"\") {\r\n      this.setState({\r\n        imageCategoryError: \"Need Category\"\r\n      });\r\n      return;\r\n    }\r\n    for (let i in this.state.allImageData) {\r\n      let item = this.state.allImageData[i];\r\n      if (item.filename === this.state.imageName) {\r\n        if (this.state.nameFlag) {\r\n          this.setState({\r\n            imageNameError: \"Image Name Exist\"\r\n          });\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    if (!this.state.fileFlag && !this.state.nameFlag && !this.state.categoryFlag) {\r\n      this.setState({ activeModal: false });\r\n      return;\r\n    }\r\n\r\n    if (this.state.fileFlag) {\r\n      this.setState({ loading: true });\r\n      let formdata = new FormData();\r\n      formdata.append(\"file\", this.state.file);\r\n      formdata.append(\"filename\", this.state.imageName);\r\n      formdata.append(\"category\", this.state.categoryValue);\r\n      formdata.append(\"id\", this.state.id);\r\n      axios\r\n        .post(\"https://54a1da76.ngrok.io/drop/editWithFile\", formdata, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\"\r\n          }\r\n        })\r\n        .then(res => {\r\n          if (res.data === \"success\") {\r\n            this.getList();\r\n            this.setState({\r\n              activeModal: false,\r\n              loading: false\r\n            });\r\n            console.log(res.data);\r\n          } else {\r\n            console.log(res.data);\r\n          }\r\n        });\r\n    } else {\r\n      if (this.state.nameFlag) {\r\n        console.log(\"edit both\");\r\n        this.setState({ loading: true });\r\n        let formdata = {\r\n          id: this.state.id,\r\n          filename: this.state.imageName,\r\n          category: this.state.categoryValue\r\n        };\r\n        axios\r\n          .post(\"https://54a1da76.ngrok.io/drop/editWithoutFile\", {\r\n            data: formdata\r\n          })\r\n          .then(res => {\r\n            if (res.data === \"success\") {\r\n              this.getList();\r\n              this.setState({\r\n                activeModal: false,\r\n                loading: false\r\n              });\r\n              console.log(res.data);\r\n            } else {\r\n              console.log(res.data);\r\n            }\r\n          });\r\n      } else if (this.state.categoryFlag) {\r\n        console.log(\"edit Category\");\r\n        this.setState({ loading: true });\r\n        let formdata = {\r\n          id: this.state.id,\r\n          category: this.state.categoryValue\r\n        };\r\n        axios\r\n          .post(\"https://54a1da76.ngrok.io/drop/editWithoutFile\", {\r\n            data: formdata\r\n          })\r\n          .then(res => {\r\n            if (res.data === \"success\") {\r\n              this.getList();\r\n              this.setState({\r\n                activeModal: false,\r\n                loading: false\r\n              });\r\n              console.log(res.data);\r\n            } else {\r\n              console.log(res.data);\r\n            }\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const categoryTextField = (\r\n      <Autocomplete.TextField\r\n        onChange={this.updateCategoryName}\r\n        label=\"Image Category\"\r\n        value={this.state.categoryValue}\r\n        placeholder=\"Enter category\"\r\n        error={this.state.imageCategoryError}\r\n      />\r\n    );\r\n    const fileUpload =\r\n      this.state.fileURL === \"\" ? (\r\n        !this.state.file && <DropZone.FileUpload />\r\n      ) : (\r\n        <Stack>\r\n          <Thumbnail size=\"large\" alt=\"edit\" source={this.state.fileURL} />\r\n        </Stack>\r\n      );\r\n\r\n    const uploadedFile = this.state.file && (\r\n      <Stack>\r\n        <Thumbnail\r\n          size=\"large\"\r\n          alt={this.state.file.name}\r\n          source={\r\n            this.state.validImageTypes.indexOf(this.state.file.type) > 0\r\n              ? window.URL.createObjectURL(this.state.file)\r\n              : \"https://cdn.shopify.com/s/files/1/0757/9955/files/New_Post.png?12678548500147524304\"\r\n          }\r\n        />\r\n      </Stack>\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        <Layout>\r\n          <Layout.Section>\r\n            <Card\r\n              title=\"Drop Images\"\r\n              actions={[\r\n                {\r\n                  content: \"Add Drop Image\",\r\n                  onAction: this.addNewImage\r\n                }\r\n              ]}\r\n            >\r\n              <Card.Section>\r\n                <TextStyle variation=\"subdued\">\r\n                  {this.state.listItemCount} Drop Images\r\n                </TextStyle>\r\n              </Card.Section>\r\n              <Card.Section>\r\n                <ResourceList\r\n                  resourceName={{ singular: \"image\", plural: \"images\" }}\r\n                  items={this.state.imageListItems}\r\n                  selectedItems={this.state.selectedListItems}\r\n                  onSelectionChange={this.setSelectedListItems}\r\n                  renderItem={item => {\r\n                    const { id, name, media, category } = item;\r\n                    const shortcutActions = [\r\n                      {\r\n                        content: (\r\n                          <Icon source={EditMajorMonotone} color=\"red\" />\r\n                        ),\r\n                        onAction: () =>\r\n                          this.editImage(id, name, media, category)\r\n                      },\r\n                      {\r\n                        content: (\r\n                          <Icon source={DeleteMajorMonotone} color=\"red\" />\r\n                        ),\r\n                        onAction: () => this.deleteImage(id)\r\n                      }\r\n                    ];\r\n\r\n                    return (\r\n                      <ResourceList.Item\r\n                        id={id}\r\n                        media={media}\r\n                        accessibilityLabel={`View details for ${name}`}\r\n                        shortcutActions={shortcutActions}\r\n                        persistActions\r\n                      >\r\n                        <h3>\r\n                          <TextStyle variation=\"strong\">\r\n                            <span style={{ fontSize: 12 }}>Name: </span>\r\n                            {name}\r\n                          </TextStyle>\r\n                        </h3>\r\n                        <h3>\r\n                          <TextStyle variation=\"strong\">\r\n                            <span style={{ fontSize: 12 }}>Category: </span>\r\n                            {category}\r\n                          </TextStyle>\r\n                        </h3>\r\n                      </ResourceList.Item>\r\n                    );\r\n                  }}\r\n                />\r\n              </Card.Section>\r\n            </Card>\r\n          </Layout.Section>\r\n        </Layout>\r\n        <Modal\r\n          open={this.state.activeModal}\r\n          onClose={this.closeModal}\r\n          title=\"Add Image\"\r\n          primaryAction={this.state.modalAction}\r\n          style={{ padding: \"20px\" }}\r\n          loading={this.state.loading}\r\n        >\r\n          <Modal.Section>\r\n            <Stack alignment=\"center\">\r\n              <Stack.Item>\r\n                <div style={{ width: 100, height: 100 }}>\r\n                  <DropZone\r\n                    openFileDialog={this.state.openFileDialog}\r\n                    onDrop={this.handleDropZoneDrop}\r\n                    onFileDialogClose={this.toggleOpenFileDialog}\r\n                  >\r\n                    {fileUpload}\r\n                    {uploadedFile}\r\n                  </DropZone>\r\n                  <InlineError message={this.state.fileError} />\r\n                </div>\r\n              </Stack.Item>\r\n              <Stack.Item>\r\n                <TextField\r\n                  label=\"Image Name\"\r\n                  value={this.state.imageName}\r\n                  onChange={this.updateImageName}\r\n                  placeholder=\"Enter image name\"\r\n                  error={this.state.imageNameError}\r\n                />\r\n              </Stack.Item>\r\n              <Stack.Item>\r\n                <Autocomplete\r\n                  options={this.state.categoryOptions}\r\n                  selected={this.state.categorySelectedOptions}\r\n                  onSelect={this.updateCategoryOptions}\r\n                  textField={categoryTextField}\r\n                />\r\n              </Stack.Item>\r\n            </Stack>\r\n          </Modal.Section>\r\n        </Modal>\r\n        <Modal\r\n          open={this.state.activeDeleteModal}\r\n          onClose={this.handleDeleteModalChange}\r\n          title=\"Do you really want to delete?\"\r\n          loading={this.state.loading}\r\n          primaryAction={{\r\n            content: \"Yes\",\r\n            onAction: this.confirmDelete\r\n          }}\r\n          secondaryActions={{\r\n            content: \"No\",\r\n            onAction: () => {\r\n              this.setState({ activeDeleteModal: false });\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}